<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.19.17"/><link rel="canonical" href="https://kenmikanmi.github.io/blog/-Beyond-Legacy-Code" data-baseprotocol="https:" data-basehost="kenmikanmi.github.io"/><link rel="sitemap" type="application/xml" href="/blog/sitemap.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">レガシーコードからの脱却 - Beyond Legacy Code</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Merriweather:700,700i&amp;display=swap" rel="stylesheet"/><meta data-react-helmet="true" charSet="utf-8"/><meta data-react-helmet="true" http-equiv="X-UA-Compatible" content="IE=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" name="theme-color" content="#fff"/><meta data-react-helmet="true" itemProp="name" content="レガシーコードからの脱却 - Beyond Legacy Code"/><meta data-react-helmet="true" itemProp="description" content="読中メモ"/><meta data-react-helmet="true" itemProp="image" content="https://kenmikanmi.github.io/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/0ff54/legacy.jpg"/><meta data-react-helmet="true" name="description" content="読中メモ"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site"/><meta data-react-helmet="true" name="twitter:title" content="レガシーコードからの脱却 - Beyond Legacy Code"/><meta data-react-helmet="true" name="twitter:description" content="読中メモ"/><meta data-react-helmet="true" name="twitter:creator"/><meta data-react-helmet="true" name="twitter:image" content="https://kenmikanmi.github.io/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/0ff54/legacy.jpg"/><meta data-react-helmet="true" property="og:title" content="レガシーコードからの脱却 - Beyond Legacy Code"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:image" content="https://kenmikanmi.github.io/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/0ff54/legacy.jpg"/><meta data-react-helmet="true" property="og:description" content="読中メモ"/><meta data-react-helmet="true" property="og:site_name"/><meta data-react-helmet="true" name="article:published_time" content="July 5th, 2020"/><meta data-react-helmet="true" name="twitter:label1" value="Reading time"/><meta data-react-helmet="true" name="twitter:data1" value="6 min read"/><script data-react-helmet="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://kenmikanmi.github.io/blog/-Beyond-Legacy-Code"},"headline":"レガシーコードからの脱却 - Beyond Legacy Code","image":"https://kenmikanmi.github.io/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/0ff54/legacy.jpg","datePublished":"2020-07-05T00:00:00.000Z","dateModified":"2020-07-05T00:00:00.000Z","author":[{"@type":"Person","name":"Kenya Hondoh"}],"description":"読中メモ","publisher":{"@type":"Organization","name":"Kenya Hondoh","logo":{"@type":"ImageObject","url":"https://kenmikanmi.github.io/icons/icon-512x512.png"}}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml"/><link rel="icon" href="/blog/icons/icon-48x48.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link rel="manifest" href="/blog/manifest.webmanifest"/><meta name="theme-color" content="#fff"/><link rel="apple-touch-icon" sizes="48x48" href="/blog/icons/icon-48x48.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link rel="apple-touch-icon" sizes="72x72" href="/blog/icons/icon-72x72.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link rel="apple-touch-icon" sizes="96x96" href="/blog/icons/icon-96x96.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link rel="apple-touch-icon" sizes="144x144" href="/blog/icons/icon-144x144.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link rel="apple-touch-icon" sizes="192x192" href="/blog/icons/icon-192x192.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link rel="apple-touch-icon" sizes="256x256" href="/blog/icons/icon-256x256.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link rel="apple-touch-icon" sizes="384x384" href="/blog/icons/icon-384x384.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link rel="apple-touch-icon" sizes="512x512" href="/blog/icons/icon-512x512.png?v=0a2bd2cbecff9a1ca2df6973358e06e5"/><link as="script" rel="preload" href="/blog/webpack-runtime-ca4bd027e6242146f66c.js"/><link as="script" rel="preload" href="/blog/app-8fb4eb3abb439de9c905.js"/><link as="script" rel="preload" href="/blog/commons-e5e8cad7c5387e39e401.js"/><link as="script" rel="preload" href="/blog/component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx-6a99196427a56700b0e7.js"/><link as="fetch" rel="preload" href="/blog/page-data/-Beyond-Legacy-Code/page-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="x3eh8d">body{--theme-ui-colors-prism-token:var(--theme-ui-colors-prism-token,#fff);--theme-ui-colors-prism-languageJavascript:var(--theme-ui-colors-prism-languageJavascript,#e8696b);--theme-ui-colors-prism-javascript:var(--theme-ui-colors-prism-javascript,#e8696b);--theme-ui-colors-prism-background:var(--theme-ui-colors-prism-background,#292c34);--theme-ui-colors-prism-comment:var(--theme-ui-colors-prism-comment,#5e6a76);--theme-ui-colors-prism-string:var(--theme-ui-colors-prism-string,#a8e2a8);--theme-ui-colors-prism-var:var(--theme-ui-colors-prism-var,#b3bac5);--theme-ui-colors-prism-number:var(--theme-ui-colors-prism-number,#e4854d);--theme-ui-colors-prism-constant:var(--theme-ui-colors-prism-constant,#b3bac5);--theme-ui-colors-prism-plain:var(--theme-ui-colors-prism-plain,#fff);--theme-ui-colors-prism-doctype:var(--theme-ui-colors-prism-doctype,#e8696b);--theme-ui-colors-prism-tag:var(--theme-ui-colors-prism-tag,#e8696b);--theme-ui-colors-prism-keyword:var(--theme-ui-colors-prism-keyword,#d49fd4);--theme-ui-colors-prism-boolean:var(--theme-ui-colors-prism-boolean,#ff5874);--theme-ui-colors-prism-function:var(--theme-ui-colors-prism-function,#5F8DC3);--theme-ui-colors-prism-parameter:var(--theme-ui-colors-prism-parameter,#F9965D);--theme-ui-colors-prism-className:var(--theme-ui-colors-prism-className,#ffcf74);--theme-ui-colors-prism-attrName:var(--theme-ui-colors-prism-attrName,#bf87ba);--theme-ui-colors-prism-attrValue:var(--theme-ui-colors-prism-attrValue,#a8e2a8);--theme-ui-colors-prism-interpolation:var(--theme-ui-colors-prism-interpolation,#fff);--theme-ui-colors-prism-punctuation:var(--theme-ui-colors-prism-punctuation,#5FA8AA);--theme-ui-colors-prism-maybe-class-name:var(--theme-ui-colors-prism-maybe-class-name,#fff);--theme-ui-colors-prism-property:var(--theme-ui-colors-prism-property,#80cbc4);--theme-ui-colors-prism-propertyAccess:var(--theme-ui-colors-prism-propertyAccess,#fff);--theme-ui-colors-prism-namespace:var(--theme-ui-colors-prism-namespace,#b2ccd6);--theme-ui-colors-prism-highlight:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));--theme-ui-colors-prism-highlightBorder:var(--theme-ui-colors-prism-highlightBorder,#e1bde2);--theme-ui-colors-prism-dom:var(--theme-ui-colors-prism-dom,#5F8DC3);--theme-ui-colors-prism-operator:var(--theme-ui-colors-prism-operator,#5FA8AA);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#000);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#73737D);--theme-ui-colors-grey:var(--theme-ui-colors-grey,#73737D);--theme-ui-colors-background:var(--theme-ui-colors-background,#fafafa);--theme-ui-colors-accent:var(--theme-ui-colors-accent,#6166DC);--theme-ui-colors-hover:var(--theme-ui-colors-hover,rgba(0,0,0,0.07));--theme-ui-colors-gradient:var(--theme-ui-colors-gradient,linear-gradient(180deg,rgba(217,219,224,0) 0%,#D9DBE0 100%));--theme-ui-colors-articleText:var(--theme-ui-colors-articleText,#08080B);--theme-ui-colors-track:var(--theme-ui-colors-track,rgba(8,8,11,0.3));--theme-ui-colors-progress:var(--theme-ui-colors-progress,#000);--theme-ui-colors-card:var(--theme-ui-colors-card,#fff);--theme-ui-colors-error:var(--theme-ui-colors-error,#EE565B);--theme-ui-colors-success:var(--theme-ui-colors-success,#46B17B);--theme-ui-colors-errorBackground:var(--theme-ui-colors-errorBackground,rgba(238,86,91,0.1));--theme-ui-colors-horizontalRule:var(--theme-ui-colors-horizontalRule,rgba(8,8,11,0.15));--theme-ui-colors-inputBackground:var(--theme-ui-colors-inputBackground,rgba(0,0,0,0.05));--theme-ui-colors-list:var(--theme-ui-colors-list,#002575);--theme-ui-colors-h2Background:var(--theme-ui-colors-h2Background,#dfefff);--theme-ui-colors-h3Background:var(--theme-ui-colors-h3Background,#fffaf4);--theme-ui-colors-quoteBackground:var(--theme-ui-colors-quoteBackground,#fff1c9);--theme-ui-colors-quoteBorder:var(--theme-ui-colors-quoteBorder,#ffbb33);--theme-ui-colors-underline:var(--theme-ui-colors-underline,#ffbaa1);--theme-ui-colors-codeBackground:var(--theme-ui-colors-codeBackground,#ebebeb);--theme-ui-colors-codeFontColor:var(--theme-ui-colors-codeFontColor,#333);color:var(--theme-ui-colors-text,undefined);background-color:var(--theme-ui-colors-background,var(--theme-ui-colors-background,#fafafa));}body.theme-ui-dark{--theme-ui-colors-grey:var(--theme-ui-colors-modes-dark-grey,#73737D);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#fff);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#fff);--theme-ui-colors-accent:var(--theme-ui-colors-modes-dark-accent,#E9DAAC);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#373740);--theme-ui-colors-hover:var(--theme-ui-colors-modes-dark-hover,rgba(255,255,255,0.07));--theme-ui-colors-gradient:var(--theme-ui-colors-modes-dark-gradient,linear-gradient(180deg,#111216 0%,rgba(66,81,98,0.0) 0%));--theme-ui-colors-articleText:var(--theme-ui-colors-modes-dark-articleText,#fff);--theme-ui-colors-track:var(--theme-ui-colors-modes-dark-track,rgba(255,255,255,0.3));--theme-ui-colors-progress:var(--theme-ui-colors-modes-dark-progress,#fff);--theme-ui-colors-card:var(--theme-ui-colors-modes-dark-card,#1D2128);--theme-ui-colors-error:var(--theme-ui-colors-modes-dark-error,#EE565B);--theme-ui-colors-success:var(--theme-ui-colors-modes-dark-success,#46B17B);--theme-ui-colors-errorBackground:var(--theme-ui-colors-modes-dark-errorBackground,rgba(238,86,91,0.1));--theme-ui-colors-horizontalRule:var(--theme-ui-colors-modes-dark-horizontalRule,rgba(255,255,255,0.15));--theme-ui-colors-inputBackground:var(--theme-ui-colors-modes-dark-inputBackground,rgba(255,255,255,0.07));--theme-ui-colors-list:var(--theme-ui-colors-modes-dark-list,#4dc3ff);--theme-ui-colors-h2Background:var(--theme-ui-colors-modes-dark-h2Background,#745F4C);--theme-ui-colors-h3Background:var(--theme-ui-colors-modes-dark-h3Background,#416176);--theme-ui-colors-quoteBackground:var(--theme-ui-colors-modes-dark-quoteBackground,#002c69);--theme-ui-colors-quoteBorder:var(--theme-ui-colors-modes-dark-quoteBorder,#99fcff);--theme-ui-colors-underline:var(--theme-ui-colors-modes-dark-underline,#ffbaa1);--theme-ui-colors-codeBackground:var(--theme-ui-colors-modes-dark-codeBackground,#333);--theme-ui-colors-codeFontColor:var(--theme-ui-colors-modes-dark-codeFontColor,#ebebeb);}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1birv2v">.css-1birv2v{position:relative;background:var(--theme-ui-colors-background,#fafafa);-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);min-height:100vh;}</style><div class="css-1birv2v e1u54h6q0"><style data-emotion-css="1vmv202">:root{--ease-in-quad:cubic-bezier(0.55,0.085,0.68,0.53);--ease-in-quart:cubic-bezier(0.895,0.03,0.685,0.22);--ease-out-quad:cubic-bezier(0.25,0.46,0.45,0.94);--ease-out-quart:cubic-bezier(0.165,0.84,0.44,1);--ease-in-out-quad:cubic-bezier(0.455,0.03,0.515,0.955);--ease-in-out-quart:cubic-bezier(0.77,0,0.175,1);}@font-face{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Segoe UI","Arial",sans-serif;font-weight:400;font-style:normal;}*,*:before,*:after{box-sizing:inherit;margin:0;padding:0;font-size:inherit;font-display:block;}:root{-ms-overflow-style:-ms-autohiding-scrollbar;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;cursor:default;font-size:0.625rem;line-height:1.4;}body{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Segoe UI","Arial",sans-serif;font-size:1.6rem;margin:0;font-weight:400;height:100%;}button,a{-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}a:focus{outline:none;}audio,canvas,iframe,img,svg,video{vertical-align:middle;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}input,textarea,select,button{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Segoe UI","Arial",sans-serif;}.underline{-webkit-text-decoration:underline;text-decoration:underline;}button,input,select,textarea{color:inherit;font-family:inherit;font-style:inherit;font-weight:inherit;}code,kbd,pre,samp{font-family:monospace;}fieldset,button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;outline:none;background:transparent;}table{border-collapse:separate;border-spacing:0;}audio:not([controls]){display:none;}details{display:block;}input:focus,input:active{outline:none;}input[type="number"]{width:auto;}img.Image__Zoom ~ div{background:transparent !important;}</style><style data-emotion-css="il8sto">.css-il8sto{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;}@media (max-width:66.875em){.css-il8sto{max-width:850px;}}@media (max-width:45.9375em){.css-il8sto{padding:0 4rem;max-width:567px;}}@media (max-width:33.75em){.css-il8sto{max-width:100%;}}</style><section class="css-il8sto e9w9r0m0"><style data-emotion-css="ysq45m">.css-ysq45m{position:relative;z-index:100;padding-top:100px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:80em){.css-ysq45m{padding-top:50px;}}@media screen and (max-height:800px){.css-ysq45m{padding-top:50px;}}</style><div class="css-ysq45m e1q3p6rm1"><style data-emotion-css="dj9cqc">.css-dj9cqc{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;left:0;}@media (max-width:80em){.css-dj9cqc{left:0;}}.css-dj9cqc[data-a11y="true"]:focus::after{content:"";position:absolute;left:-10%;top:-30%;width:120%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}.css-dj9cqc:hover .e1q3p6rm0{-webkit-transform:translateX(-3px);-ms-transform:translateX(-3px);transform:translateX(-3px);}</style><a data-a11y="false" title="Navigate back to the homepage" aria-label="Navigate back to the homepage" back="false" class="css-dj9cqc e1q3p6rm2" href="/blog/"><svg id="blog-logo" version="1.0" xmlns="http://www.w3.org/2000/svg" width="60px" height="60px" viewBox="0 0 7200 7200" preserveAspectRatio="xMidYMid meet"><g id="layer101" fill="#306aa3" stroke="none"><path d="M10 6400 l0 -789 389 -3 c214 -2 393 -7 398 -11 11 -11 11 -1583 0 -1594 -5 -4 -184 -9 -398 -11 l-389 -3 0 -389 0 -389 389 -3 c214 -2 393 -7 398 -11 4 -5 9 -184 11 -397 l3 -389 389 -3 c213 -2 392 -7 397 -11 4 -5 9 -184 11 -397 l3 -389 389 -3 c213 -2 392 -7 397 -11 4 -5 9 -184 11 -397 l3 -389 389 -3 c213 -2 392 -7 397 -11 4 -5 9 -184 11 -398 l3 -389 389 0 389 0 3 389 c2 214 7 393 11 398 5 4 184 9 397 11 l389 3 3 389 c2 213 7 392 11 397 5 4 184 9 397 11 l389 3 3 389 c2 213 7 392 11 397 5 4 184 9 397 11 l389 3 3 389 c2 213 7 392 11 397 5 4 184 9 398 11 l389 3 0 389 0 389 -389 3 c-214 2 -393 7 -398 11 -11 11 -11 1583 0 1594 5 4 184 9 398 11 l389 3 0 789 0 790 -390 0 -389 0 -3 -389 c-2 -214 -7 -393 -11 -398 -5 -4 -184 -9 -397 -11 l-389 -3 -3 -389 c-2 -213 -7 -392 -11 -397 -11 -11 -783 -11 -794 0 -4 5 -9 364 -11 798 l-2 789 -390 0 -390 0 -2 -789 c-2 -434 -7 -793 -11 -798 -5 -4 -183 -8 -397 -8 -214 0 -392 4 -397 8 -4 5 -9 364 -11 798 l-2 789 -390 0 -390 0 -2 -789 c-2 -434 -7 -793 -11 -798 -11 -11 -783 -11 -794 0 -4 5 -9 184 -11 397 l-3 389 -389 3 c-213 2 -392 7 -397 11 -4 5 -9 184 -11 398 l-3 389 -389 0 -390 0 0 -790z"></path></g><g id="layer102" fill="#a3bfd9" stroke="none"><path d="M10 6400 l0 -789 389 -3 c214 -2 393 -7 398 -11 11 -11 11 -1583 0 -1594 -5 -4 -184 -9 -398 -11 l-389 -3 0 -389 0 -389 389 -3 c214 -2 393 -7 398 -11 4 -5 9 -184 11 -397 l3 -389 389 -3 c213 -2 392 -7 397 -11 4 -5 9 -184 11 -397 l3 -389 389 -3 c213 -2 392 -7 397 -11 4 -5 9 -184 11 -397 l3 -389 389 -3 c213 -2 392 -7 397 -11 4 -5 9 -184 11 -398 l3 -389 389 0 389 0 3 389 c2 214 7 393 11 398 5 4 184 9 397 11 l389 3 3 389 c2 213 7 392 11 397 5 4 184 9 397 11 l389 3 3 389 c2 213 7 392 11 397 5 4 184 9 397 11 l389 3 3 389 c2 213 7 392 11 397 5 4 184 9 398 11 l389 3 0 389 0 389 -389 3 c-214 2 -393 7 -398 11 -11 11 -11 1583 0 1594 5 4 184 9 398 11 l389 3 0 789 0 790 -390 0 -389 0 -3 -389 c-2 -214 -7 -393 -11 -398 -5 -4 -184 -9 -397 -11 l-389 -3 -3 -389 c-2 -213 -7 -392 -11 -397 -11 -11 -783 -11 -794 0 -4 5 -9 364 -11 798 l-2 789 -390 0 -390 0 -2 -789 c-2 -434 -7 -793 -11 -798 -5 -4 -183 -8 -397 -8 -214 0 -392 4 -397 8 -4 5 -9 364 -11 798 l-2 789 -390 0 -390 0 -2 -789 c-2 -434 -7 -793 -11 -798 -11 -11 -783 -11 -794 0 -4 5 -9 184 -11 397 l-3 389 -389 3 c-213 2 -392 7 -397 11 -4 5 -9 184 -11 398 l-3 389 -389 0 -390 0 0 -790z m3190 -2800 l0 -400 -400 0 -400 0 0 400 0 400 400 0 400 0 0 -400z m2400 0 l0 -400 -400 0 -400 0 0 400 0 400 400 0 400 0 0 -400z"></path></g><g id="layer103" fill="#ffffff" stroke="none"><path d="M1600 4000 l0 -800 400 0 400 0 0 400 0 400 400 0 400 0 0 400 0 400 -800 0 -800 0 0 -800z"></path><path d="M4000 4000 l0 -800 400 0 400 0 0 400 0 400 400 0 400 0 0 400 0 400 -800 0 -800 0 0 -800z"></path></g></svg><style data-emotion-css="10l5b14">.css-10l5b14{position:absolute;display:inline-block;opacity:0;width:0px;height:0px;visibility:hidden;overflow:hidden;}</style><span class="css-10l5b14 e1q3p6rm8">Navigate back to the homepage</span></a><style data-emotion-css="1qdrnpx">.css-1qdrnpx{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:33.75em){.css-1qdrnpx{right:-5px;}}</style><div class="css-1qdrnpx e1q3p6rm3"><style data-emotion-css="4zc6l3">.css-4zc6l3{opacity:0.5;position:relative;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;margin-left:30px;}.css-4zc6l3:hover{opacity:1;}.css-4zc6l3[data-a11y="true"]:focus::after{content:"";position:absolute;left:0;top:-30%;width:100%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}@media (max-width:45.9375em){.css-4zc6l3{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-transform:scale(0.708);-ms-transform:scale(0.708);transform:scale(0.708);margin-left:10px;}.css-4zc6l3:hover{opacity:0.5;}}</style><button data-a11y="false" aria-label="Copy URL to clipboard" title="Copy URL to clipboard" class="css-4zc6l3 e1q3p6rm5"><svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2H14C15.6567 2 17 3.34328 17 5V9C17 10.6567 15.6567 12 14 12H10C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14H14C16.7613 14 19 11.7613 19 9V5C19 2.23872 16.7613 0 14 0H5C2.23872 0 0 2.23872 0 5V9C0 10.4938 0.656313 11.8361 1.6935 12.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625C3.47028 12.2483 3.43068 11.6164 3.0165 11.2511C2.39169 10.6999 2 9.89621 2 9V5ZM7 11C7 9.34328 8.34328 8 10 8H14C14.5523 8 15 7.55228 15 7C15 6.44772 14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11V15C5 17.7613 7.23872 20 10 20H19C21.7613 20 24 17.7613 24 15V11C24 9.50621 23.3437 8.16393 22.3065 7.24906C21.8923 6.88372 21.2604 6.92332 20.8951 7.3375C20.5297 7.75168 20.5693 8.38361 20.9835 8.74894C21.6083 9.30007 22 10.1038 22 11V15C22 16.6567 20.6567 18 19 18H10C8.34328 18 7 16.6567 7 15V11Z" fill="#000"></path></svg><style data-emotion-css="16kvgc5">.css-16kvgc5{position:absolute;padding:4px 13px;background:rgba(0,0,0,0.1);color:#000;border-radius:5px;font-size:14px;top:-35px;opacity:0;-webkit-transform:none;-ms-transform:none;transform:none;-webkit-transition:-webkit-transform 0.3s ease-in-out,opacity 0.3s ease-in-out;-webkit-transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;}.css-16kvgc5::after{content:"";position:absolute;left:0;right:0;bottom:-6px;margin:0 auto;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid rgba(0,0,0,0.1);}</style><div class="css-16kvgc5 e1q3p6rm4">Copied</div></button><button data-a11y="false" aria-label="Activate dark mode" title="Activate dark mode" class="css-4zc6l3 e1q3p6rm5"><style data-emotion-css="jmdf3f">.css-jmdf3f{position:relative;width:24px;height:24px;border-radius:50%;border:2px solid var(--theme-ui-colors-primary,#000);background:var(--theme-ui-colors-primary,#000);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:all 0.45s ease;transition:all 0.45s ease;overflow:hidden;}.css-jmdf3f::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-primary,#000);border-radius:50%;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease;-webkit-transition:transform 0.45s ease;transition:transform 0.45s ease;}.css-jmdf3f::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-primary,#000),0 23px 0 var(--theme-ui-colors-primary,#000),23px 0 0 var(--theme-ui-colors-primary,#000),-23px 0 0 var(--theme-ui-colors-primary,#000),15px 15px 0 var(--theme-ui-colors-primary,#000),-15px 15px 0 var(--theme-ui-colors-primary,#000),15px -15px 0 var(--theme-ui-colors-primary,#000),-15px -15px 0 var(--theme-ui-colors-primary,#000);-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transition:all 0.35s ease;transition:all 0.35s ease;}@media (max-width:45.9375em){.css-jmdf3f::after{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}}</style><div class="css-jmdf3f e1q3p6rm6"></div><style data-emotion-css="1k5uyy5">.css-1k5uyy5{position:absolute;right:-1px;top:-8px;height:24px;width:24px;border-radius:50%;border:0;background:var(--theme-ui-colors-background,#fafafa);-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),-webkit-transform 0.45s ease;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),transform 0.45s ease;transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),transform 0.45s ease;}</style><div class="css-1k5uyy5 e1q3p6rm7"></div></button></div></div></section><style data-emotion-css="wn0kt9">@media (max-width:33.75em){.css-wn0kt9::before{content:"";width:100%;height:20px;background:var(--theme-ui-colors-primary,#000);position:absolute;left:0;top:0;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}.css-wn0kt9::after{content:"";width:100%;height:10px;background:var(--theme-ui-colors-background,#fafafa);position:absolute;left:0;top:10px;border-top-left-radius:25px;border-top-right-radius:25px;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}}</style><div class="css-wn0kt9 efpmxor0"><style data-emotion-css="1ito37z">.css-1ito37z{position:relative;z-index:10;margin:100px auto 120px;padding-left:68px;max-width:749px;}@media (max-width:66.875em){.css-1ito37z{padding-left:53px;max-width:calc(507px + 53px);margin:100px auto 70px;}}@media (max-width:45.9375em){.css-1ito37z{padding-left:0;margin:100px auto 70px;max-width:480px;}}@media (max-width:33.75em){.css-1ito37z{margin:170px auto 180px;padding:0 40px;}}@media screen and (max-height:700px){.css-1ito37z{margin:100px auto;}}</style><header class="css-1ito37z efpmxor2"><style data-emotion-css="kuojv">.css-kuojv{word-break:break-word;font-size:52px;line-height:2;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;font-size:48px;font-family:'Merriweather',Georgia,Serif;margin-bottom:25px;font-weight:bold;line-height:1.32;}@media (max-width:66.875em){.css-kuojv{font-size:38px;line-height:1.2;}}@media (max-width:33.75em){.css-kuojv{font-size:32px;line-height:1.3;}}@media (max-width:45.9375em){.css-kuojv{margin-bottom:20px;font-size:36px;}}@media (max-width:33.75em){.css-kuojv{font-size:30px;word-wrap:break-word;}}</style><h1 class="css-kuojv efpmxor3">レガシーコードからの脱却 - Beyond Legacy Code</h1><style data-emotion-css="sdvpri">.css-sdvpri{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:18px;color:var(--theme-ui-colors-grey,#73737D);}@media (max-width:33.75em){.css-sdvpri{font-size:14px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-sdvpri strong{display:block;font-weight:500;margin-bottom:5px;}}</style><div class="css-sdvpri efpmxor4"><style data-emotion-css="1mpu0fb">.css-1mpu0fb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;}.css-1mpu0fb strong{-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}.css-1mpu0fb:hover strong{color:var(--theme-ui-colors-primary,#000);}</style><a class="css-1mpu0fb e1j91cvq2" href="/blog/authors/Kenya-Hondoh"><style data-emotion-css="u1pf06">.css-u1pf06{height:25px;width:25px;border-radius:50%;margin-right:14px;background:var(--theme-ui-colors-grey,#73737D);overflow:hidden;}.css-u1pf06 .gatsby-image-wrapper > div{padding-bottom:100% !important;}@media (max-width:33.75em){.css-u1pf06{display:none;}}</style><div class="css-u1pf06 e1j91cvq0"><style data-emotion-css="uodor8">.css-uodor8{border-radius:50%;}</style><style data-emotion-css="1qspsgn">.css-1qspsgn{border-radius:50%;}.css-1qspsgn > img{-webkit-filter:blur(8px);filter:blur(8px);}</style><div class="e1j91cvq1 css-1qspsgn eria91a0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQDBv/EABcBAQADAAAAAAAAAAAAAAAAAAEAAgP/2gAMAwEAAhADEAAAAbMsJalSdDopw02Cf//EABwQAAICAgMAAAAAAAAAAAAAAAACAQMREgQTFP/aAAgBAQABBQL0E8ljssk1kRmMmSs1U//EABYRAAMAAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPwEr/8QAFREBAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQIBAT8BKf/EABwQAAIBBQEAAAAAAAAAAAAAAAABMhASITGRof/aAAgBAQAGPwKPpgkzQ7qsiuH/xAAfEAACAQMFAQAAAAAAAAAAAAAAAREhMVFBYXGBkaH/2gAIAQEAAT8hb6J2GLEuBuT9x5HhSZUyNZE5tq5PcX//2gAMAwEAAgADAAAAEOwnPv/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8Q1g4z/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERITH/2gAIAQIBAT8QWqlOkRH/xAAeEAEBAQACAQUAAAAAAAAAAAABEQAhMVFBYXGRwf/aAAgBAQABPxBZT/N+Gp91FFn3nnY8ThEK+6zV1wEdPqahSu4POhSpefGWVT5Rv//Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/58718/kenya_hondoh.webp 13w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/74aad/kenya_hondoh.webp 25w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/e7b2c/kenya_hondoh.webp 50w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/ed320/kenya_hondoh.webp 75w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/66016/kenya_hondoh.webp 100w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/b923f/kenya_hondoh.webp 1280w" sizes="(max-width: 50px) 100vw, 50px" /><source srcset="/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/afb2b/kenya_hondoh.jpg 13w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/7c20e/kenya_hondoh.jpg 25w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/fa1ea/kenya_hondoh.jpg 50w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/03612/kenya_hondoh.jpg 75w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/61cdf/kenya_hondoh.jpg 100w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/68386/kenya_hondoh.jpg 1280w" sizes="(max-width: 50px) 100vw, 50px" /><img loading="lazy" sizes="(max-width: 50px) 100vw, 50px" srcset="/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/afb2b/kenya_hondoh.jpg 13w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/7c20e/kenya_hondoh.jpg 25w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/fa1ea/kenya_hondoh.jpg 50w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/03612/kenya_hondoh.jpg 75w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/61cdf/kenya_hondoh.jpg 100w,
/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/68386/kenya_hondoh.jpg 1280w" src="/blog/static/4a2a809128b2fcf45d7e04f8731a38bc/fa1ea/kenya_hondoh.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><strong>Kenya Hondoh</strong><style data-emotion-css="sjizha">@media (max-width:33.75em){.css-sjizha{display:none;}}</style><span class="css-sjizha e1j91cvq13">, </span></a><style data-emotion-css="1d64qrg">.css-1d64qrg{margin-left:0;}@media (max-width:33.75em){.css-1d64qrg{margin-left:0;}}</style><div class="css-1d64qrg efpmxor1">July 5th, 2020<!-- --> · <!-- -->6<!-- --> min read</div></div></header><style data-emotion-css="1hfe35p">.css-1hfe35p{position:relative;z-index:1;width:100%;max-width:780px;overflow:hidden;margin:0 auto;box-shadow:0 30px 60px -10px rgba(0,0,0,0.2),0 18px 36px -18px rgba(0,0,0,0.22);}@media (max-width:45.9375em){.css-1hfe35p{max-width:100%;}}@media (max-width:33.75em){.css-1hfe35p{margin:0 auto;width:calc(100vw - 40px);height:220px;}.css-1hfe35p > div{height:220px;}}</style><div id="ArticleImage__Hero" class="css-1hfe35p efpmxor5"><style data-emotion-css="133qvua">.css-133qvua > img{-webkit-filter:blur(8px);filter:blur(8px);}</style><div class="css-133qvua eria91a0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:75%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAamkUuMw/8QAGhAAAwADAQAAAAAAAAAAAAAAAAECAxESIv/aAAgBAQABBQJM5hk71XqccuTo/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQETGB/9oACAEBAAY/Ai7T7DRkf//EABoQAQADAQEBAAAAAAAAAAAAAAEAESExUWH/2gAIAQEAAT8hAa4escBAZ1BXs+lmjYLt2LeZP//aAAwDAQACAAMAAAAQmN//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCn/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARITFBUYH/2gAIAQEAAT8QOpOKlTdxL2A1NKFrXlv2BO1lHn5CNTwGJap4T//Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/77392/legacy.webp 236w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/1f177/legacy.webp 472w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/99fbb/legacy.webp 944w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/9000d/legacy.webp 1200w" sizes="(max-width: 944px) 100vw, 944px" /><source srcset="/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/e0f30/legacy.jpg 236w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/86afd/legacy.jpg 472w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/58fe7/legacy.jpg 944w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/0ff54/legacy.jpg 1200w" sizes="(max-width: 944px) 100vw, 944px" /><img loading="lazy" sizes="(max-width: 944px) 100vw, 944px" srcset="/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/e0f30/legacy.jpg 236w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/86afd/legacy.jpg 472w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/58fe7/legacy.jpg 944w,
/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/0ff54/legacy.jpg 1200w" src="/blog/static/95cfa0ab2fed91dfc94567fbb50ac80c/58fe7/legacy.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></div><style data-emotion-css="145b7r6">.css-145b7r6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 auto;max-width:1140px;}@media (max-width:80em){.css-145b7r6{display:none;}}</style><aside class="css-145b7r6 e1mvde9i0"><style data-emotion-css="18dj233">.css-18dj233{position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);top:0px;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;height:100vh;z-index:3;opacity:0;visibility:hidden;-webkit-transition:opacity 0.2s linear,visibility 0.4s linear;transition:opacity 0.2s linear,visibility 0.4s linear;}</style><div class="css-18dj233 e1mvde9i1"><div><style data-emotion-css="155spwp">.css-155spwp{-webkit-user-select:initial;-moz-user-select:initial;-ms-user-select:initial;user-select:initial;pointer-events:initial;opacity:1;-webkit-transition:opacity 0.25s;transition:opacity 0.25s;}</style><div class="css-155spwp e12lgbtp0"><style data-emotion-css="1elne8e">.css-1elne8e{position:relative;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><div tabindex="-1" class="css-1elne8e ewxdfzj0"><style data-emotion-css="iefrkk">.css-iefrkk{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:calc(88vh - 40px);max-height:425px;width:1px;background-color:var(--theme-ui-colors-track,rgba(8,8,11,0.3));opacity:0.6;overflow:hidden;}</style><div aria-hidden="true" class="css-iefrkk ewxdfzj1"><style data-emotion-css="1qno6mr">.css-1qno6mr{position:absolute;height:100%;top:-100%;width:1px;background-color:var(--theme-ui-colors-progress,#000);left:0;}</style><div style="transform:translateY(0%)" class="css-1qno6mr ewxdfzj2"></div></div></div></div></div></div></aside><style data-emotion-css="19mic43">.css-19mic43{position:relative;padding-top:60px;-webkit-transition:background 0.2s linear;transition:background 0.2s linear;text-align:center;}@media (min-width:33.8125em){.css-19mic43{display:none;}}</style><div class="css-19mic43 eih7p4r0"><style data-emotion-css="gmuwbf">.css-gmuwbf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><div class="css-gmuwbf e1yswbpi0"><style data-emotion-css="1yxfb37">.css-1yxfb37{opacity:0.5;position:relative;z-index:200000000;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;margin-left:30px;}.css-1yxfb37:hover{opacity:1;}@media (max-width:45.9375em){.css-1yxfb37{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-transform:scale(0.9);-ms-transform:scale(0.9);transform:scale(0.9);margin:0 15px;}.css-1yxfb37:hover{opacity:0.5;}}</style><button data-a11y="false" aria-label="Copy URL to clipboard" class="css-1yxfb37 e1yswbpi2"><svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2H14C15.6567 2 17 3.34328 17 5V9C17 10.6567 15.6567 12 14 12H10C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14H14C16.7613 14 19 11.7613 19 9V5C19 2.23872 16.7613 0 14 0H5C2.23872 0 0 2.23872 0 5V9C0 10.4938 0.656313 11.8361 1.6935 12.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625C3.47028 12.2483 3.43068 11.6164 3.0165 11.2511C2.39169 10.6999 2 9.89621 2 9V5ZM7 11C7 9.34328 8.34328 8 10 8H14C14.5523 8 15 7.55228 15 7C15 6.44772 14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11V15C5 17.7613 7.23872 20 10 20H19C21.7613 20 24 17.7613 24 15V11C24 9.50621 23.3437 8.16393 22.3065 7.24906C21.8923 6.88372 21.2604 6.92332 20.8951 7.3375C20.5297 7.75168 20.5693 8.38361 20.9835 8.74894C21.6083 9.30007 22 10.1038 22 11V15C22 16.6567 20.6567 18 19 18H10C8.34328 18 7 16.6567 7 15V11Z" fill="black"></path></svg><div class="css-16kvgc5 e1yswbpi1">Copied</div></button><button aria-label="Toggle dark and light mode" class="css-1yxfb37 e1yswbpi2"><div class="css-jmdf3f e1yswbpi3"></div><style data-emotion-css="mslqme">.css-mslqme{position:absolute;right:-1px;top:-8px;height:24px;width:24px;border-radius:50%;border:0;background:var(--theme-ui-colors-background,#fafafa);-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);-webkit-transition:transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}</style><div class="css-mslqme e1yswbpi4"></div></button></div></div><style data-emotion-css="1j2ibf0">.css-1j2ibf0{position:relative;padding:160px 0 35px;padding-left:68px;-webkit-transition:background 0.2s linear;transition:background 0.2s linear;}@media (max-width:66.875em){.css-1j2ibf0{padding-left:53px;}}@media (max-width:45.9375em){.css-1j2ibf0{padding:70px 0 80px;}}@media (max-width:33.75em){.css-1j2ibf0{padding:60px 0;}}</style><article class="css-1j2ibf0 eih7p4r1"><style data-emotion-css="1du76zd">.css-1du76zd{position:relative;z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:10px;}.css-1du76zd code{background-color:var(--theme-ui-colors-codeBackground,#ebebeb);color:var(--theme-ui-colors-codeFontColor,#333);font-family:"Operator Mono",Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;padding:0.1em 0.2em;border-radius:5px;}.css-1du76zd h1,.css-1du76zd h2,.css-1du76zd h3,.css-1du76zd h4,.css-1du76zd h5,.css-1du76zd h6{margin:0 auto;}.css-1du76zd h1,.css-1du76zd h1 *,.css-1du76zd h2,.css-1du76zd h2 *{margin:25px auto 18px;}@media (max-width:45.9375em){.css-1du76zd h1,.css-1du76zd h1 *,.css-1du76zd h2,.css-1du76zd h2 *{margin:30px auto 18px;}}.css-1du76zd h3,.css-1du76zd h3 *{margin:20px auto 10px;}.css-1du76zd h1,.css-1du76zd h2,.css-1du76zd h3,.css-1du76zd h4,.css-1du76zd h5,.css-1du76zd h6{width:100%;max-width:780px;}@media (max-width:66.875em){.css-1du76zd h1,.css-1du76zd h2,.css-1du76zd h3,.css-1du76zd h4,.css-1du76zd h5,.css-1du76zd h6{max-width:507px;}}@media (max-width:45.9375em){.css-1du76zd h1,.css-1du76zd h2,.css-1du76zd h3,.css-1du76zd h4,.css-1du76zd h5,.css-1du76zd h6{max-width:486px;}}@media (max-width:33.75em){.css-1du76zd h1,.css-1du76zd h2,.css-1du76zd h3,.css-1du76zd h4,.css-1du76zd h5,.css-1du76zd h6{padding:0 20px;}}.css-1du76zd .prism-code{overflow:auto;width:100%;max-width:744px;margin:0 auto;padding:32px;font-size:13px;margin:15px auto 50px;border-radius:5px;font-family:"Operator Mono",Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;background:var(--theme-ui-colors-prism-background,#292c34);}.css-1du76zd .prism-code .token-line{border-left:3px solid transparent;}.css-1du76zd .prism-code .token-line .token{color:var(--theme-ui-colors-prism-token,#fff);}.css-1du76zd .prism-code .token-line .language-javascript{color:var(--theme-ui-colors-prism-languageJavascript,#e8696b);}.css-1du76zd .prism-code .token-line .javascript{color:var(--theme-ui-colors-prism-javascript,#e8696b);}.css-1du76zd .prism-code .token-line .background{color:var(--theme-ui-colors-prism-background,#292c34);}.css-1du76zd .prism-code .token-line .comment{color:var(--theme-ui-colors-prism-comment,#5e6a76);}.css-1du76zd .prism-code .token-line .string{color:var(--theme-ui-colors-prism-string,#a8e2a8);}.css-1du76zd .prism-code .token-line .var{color:var(--theme-ui-colors-prism-var,#b3bac5);}.css-1du76zd .prism-code .token-line .number{color:var(--theme-ui-colors-prism-number,#e4854d);}.css-1du76zd .prism-code .token-line .constant{color:var(--theme-ui-colors-prism-constant,#b3bac5);}.css-1du76zd .prism-code .token-line .plain{color:var(--theme-ui-colors-prism-plain,#fff);}.css-1du76zd .prism-code .token-line .doctype{color:var(--theme-ui-colors-prism-doctype,#e8696b);}.css-1du76zd .prism-code .token-line .tag{color:var(--theme-ui-colors-prism-tag,#e8696b);}.css-1du76zd .prism-code .token-line .keyword{color:var(--theme-ui-colors-prism-keyword,#d49fd4);}.css-1du76zd .prism-code .token-line .boolean{color:var(--theme-ui-colors-prism-boolean,#ff5874);}.css-1du76zd .prism-code .token-line .function{color:var(--theme-ui-colors-prism-function,#5F8DC3);}.css-1du76zd .prism-code .token-line .parameter{color:var(--theme-ui-colors-prism-parameter,#F9965D);}.css-1du76zd .prism-code .token-line .class-name{color:var(--theme-ui-colors-prism-className,#ffcf74);}.css-1du76zd .prism-code .token-line .attr-name{color:var(--theme-ui-colors-prism-attrName,#bf87ba);}.css-1du76zd .prism-code .token-line .attr-value{color:var(--theme-ui-colors-prism-attrValue,#a8e2a8);}.css-1du76zd .prism-code .token-line .interpolation{color:var(--theme-ui-colors-prism-interpolation,#fff);}.css-1du76zd .prism-code .token-line .punctuation{color:var(--theme-ui-colors-prism-punctuation,#5FA8AA);}.css-1du76zd .prism-code .token-line .maybe-class-name{color:var(--theme-ui-colors-prism-maybe-class-name,#fff);}.css-1du76zd .prism-code .token-line .property{color:var(--theme-ui-colors-prism-property,#80cbc4);}.css-1du76zd .prism-code .token-line .property-access{color:var(--theme-ui-colors-prism-propertyAccess,#fff);}.css-1du76zd .prism-code .token-line .namespace{color:var(--theme-ui-colors-prism-namespace,#b2ccd6);}.css-1du76zd .prism-code .token-line .highlight{color:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));}.css-1du76zd .prism-code .token-line .highlight-border{color:var(--theme-ui-colors-prism-highlightBorder,#e1bde2);}.css-1du76zd .prism-code .token-line .dom{color:var(--theme-ui-colors-prism-dom,#5F8DC3);}.css-1du76zd .prism-code .token-line .operator{color:var(--theme-ui-colors-prism-operator,#5FA8AA);}.css-1du76zd .prism-code .number-line{display:inline-block;width:32px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;color:#dcd9e6;}@media (max-width:45.9375em){.css-1du76zd .prism-code .number-line{opacity:0;width:0;}}.css-1du76zd .prism-code .token-line.highlight-line{margin:0 -32px;padding:0 32px;background:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));border-left:3px solid var(--theme-ui-colors-prism-highlightBorder,#e1bde2);}@media (max-width:45.9375em){.css-1du76zd .prism-code .token-line.highlight-line{margin:0 -20px;padding:0 20px;}}.css-1du76zd .prism-code .operator + .maybe-class-name{color:#ffcf74 !important;}.css-1du76zd .prism-code .plain ~ .operator{color:#5fa8aa !important;}@media (max-width:66.875em){.css-1du76zd .prism-code{left:-26px;}}@media (max-width:45.9375em){.css-1du76zd .prism-code{max-width:526px;padding:20px 20px;left:0;}}@media (max-width:33.75em){.css-1du76zd .prism-code{-webkit-text-size-adjust:none;text-size-adjust:none;border-radius:0;margin:0 auto 25px;padding:25px 20px;overflow:initial;width:unset;max-width:unset;float:left;min-width:100%;overflow:initial;position:relative;}}.css-1du76zd .gatsby-resp-image-background-image{display:none !important;}.css-1du76zd img{display:inline-block;position:relative;max-width:100%;height:auto;z-index:0;margin:15px auto 50px;border-radius:5px;}@media (max-width:45.9375em){.css-1du76zd img{margin:10px auto 45px;}}.css-1du76zd div.Image__Small{display:inline-block;position:relative;max-width:100%;height:auto;z-index:0;margin:15px auto 50px;border-radius:5px;width:100%;max-width:680px;}@media (max-width:45.9375em){.css-1du76zd div.Image__Small{margin:10px auto 45px;}}@media (max-width:66.875em){.css-1du76zd div.Image__Small{max-width:507px;}}@media (max-width:45.9375em){.css-1du76zd div.Image__Small{max-width:486px;margin:0 auto 25px;}}@media (max-width:33.75em){.css-1du76zd div.Image__Small{padding:0 20px;}}.css-1du76zd .Image__Container{text-align:center;}.css-1du76zd img.Image__With-Shadow{box-shadow:0px 15px 60px rgba(0,0,0,0.15);}.css-1du76zd div.Image__Medium{position:relative;margin:15px auto 50px;width:100%;max-width:580px;}@media (max-width:80em){.css-1du76zd div.Image__Medium{left:-34px;}}@media (max-width:66.875em){.css-1du76zd div.Image__Medium{left:-26px;}}@media (max-width:45.9375em){.css-1du76zd div.Image__Medium{border-radius:0;left:0;margin:0 auto 25px;}.css-1du76zd div.Image__Medium img{border-radius:0;}}.css-1du76zd div.Image__Large{position:relative;left:-68px;width:100vw;margin:25px auto 60px;pointer-events:none;}.css-1du76zd div.Image__Large img{border-radius:0;}@media (max-width:66.875em){.css-1du76zd div.Image__Large{left:-53px;}}@media (max-width:45.9375em){.css-1du76zd div.Image__Large{left:0;margin:0 auto 25px;}}</style><div class="css-1du76zd evru3dd0"><style data-emotion-css="xwt1i7">.css-xwt1i7{word-break:break-word;font-size:32px;line-height:2;background-color:var(--theme-ui-colors-h2Background,#dfefff);box-shadow:0px 0px 0px 5px var(--theme-ui-colors-h2Background,#dfefff);border:dashed 2px white;padding:0.2em 0.5em;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;}@media (max-width:66.875em){.css-xwt1i7{font-size:24px;}}@media (max-width:45.9375em){.css-xwt1i7{font-size:24px;line-height:1.45;}}@media (max-width:33.75em){.css-xwt1i7{font-size:22px;}}</style><h2 id="概要" class="css-xwt1i7 efq1zb21">概要</h2><style data-emotion-css="rfu7dy">.css-rfu7dy{list-style:none;line-height:1.8;counter-reset:list;color:var(--theme-ui-colors-articleText,#08080B);position:relative;padding:6px 0px 10px 35px;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);margin:0 auto;font-size:18px;width:100%;max-width:780px;}@media (max-width:66.875em){.css-rfu7dy{max-width:507px;}}@media (max-width:45.9375em){.css-rfu7dy{max-width:486px;padding-left:0px;}}@media (max-width:33.75em){.css-rfu7dy{padding-left:0px;}}.css-rfu7dy li{position:relative;padding-bottom:10px;}@media (max-width:45.9375em){.css-rfu7dy li{padding-left:30px;}}@media (max-width:33.75em){.css-rfu7dy li{padding-left:30px;}}@media (max-width:45.9375em){.css-rfu7dy li p{padding:0;}}@media (max-width:33.75em){.css-rfu7dy li p{padding:0;}}.css-rfu7dy li::before{content:'';position:absolute;left:-30px;top:8px;height:8px;width:8px;background:var(--theme-ui-colors-articleText,#08080B);border-radius:50%;background-color:var(--theme-ui-colors-list,#002575);}@media (max-width:45.9375em){.css-rfu7dy li::before{left:0;}}@media (max-width:33.75em){.css-rfu7dy li::before{left:0;}}</style><ul class="css-rfu7dy emayir50"><li class="css-0">『レガシーコードからの脱却』（オライリー社, 2019）のメモです。</li></ul><style data-emotion-css="13h9ymw">.css-13h9ymw{word-break:break-word;font-size:21px;line-height:2.5;padding:0.1em;padding-left:0.5em;color:#494949;background-color:var(--theme-ui-colors-h3Background,#fffaf4);border-left:solid 5px #ffaf58;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;}@media (max-width:45.9375em){.css-13h9ymw{font-size:22px;}}@media (max-width:33.75em){.css-13h9ymw{font-size:20px;}}</style><h3 id="本書の対象者" class="css-13h9ymw efq1zb22">本書の対象者</h3><style data-emotion-css="qpdo3c">.css-qpdo3c{line-height:2;font-size:18px;color:var(--theme-ui-colors-articleText,#08080B);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);margin:20px auto 15px;width:100%;max-width:780px;}.css-qpdo3c b{font-weight:800;}@media (max-width:66.875em){.css-qpdo3c{max-width:780px;}}@media (max-width:45.9375em){.css-qpdo3c{max-width:486px;margin:0 auto 25px;}}@media (max-width:33.75em){.css-qpdo3c{padding:0 20px;}}</style><p class="css-qpdo3c e1yjj5wz0">開発者，運用者，PM，PdM，ソフトウェアの利害関係者（非開発者）</p><h3 id="本書の目的" class="css-13h9ymw efq1zb22">本書の目的</h3><ul class="css-rfu7dy emayir50"><li class="css-0">ソフトウェア開発には「レガシーコード」を作らないためのいろんなプラクティスがある。それらを状況に応じて
適切に適用できる人を増やしたいと言うのが著者の思いであり，本書の目的である。</li><li class="css-0">レガシーコードの定義　👉「修正や拡張，作業が難しいコード」のこと。</li><li class="css-0">本書は開発者・非開発者のコミュニケーションギャップをなくし，ソフトウェア開発に関する共通認識を
築けるようにデザインされている。</li><li class="css-0">プラクティスは，XP，スクラム，リーンなどの開発手法から導かれている。</li></ul><h3 id="全体の構成" class="css-13h9ymw efq1zb22">全体の構成</h3><p class="css-qpdo3c e1yjj5wz0">以下の2つの部から構成される：</p><ul class="css-rfu7dy emayir50"><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><style data-emotion-css="l2lff">.css-l2lff{background:linear-gradient(transparent 70%,#ff99ab 70%);font-weight:600;}</style><em class="css-l2lff efespwh0">第1部　レガシーコード危機</em></p><p class="css-qpdo3c e1yjj5wz0">レガシーコードがなぜやばいのか，それによって我々がどれほどの損失を被っているのかという事実をつきつける。</p></li><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">第2部　ソフトウェアの寿命を延ばし価値を高める9つのプラクティス</em></p><p class="css-qpdo3c e1yjj5wz0">「第1部」で提示した問題への解決策（9つのプラクティス）を提示する。一応プラクティスについて説明はするが，
必ず読者自身でなぜそれが有効なのか説明できるようにすること。そうでなければ，実際に適用してもうまくいかない。</p></li></ul><h2 id="第1部-レガシーコード危機" class="css-xwt1i7 efq1zb21">第1部　レガシーコード危機</h2><h2 id="1章-何かが間違っている" class="css-xwt1i7 efq1zb21">1章　何かが間違っている</h2><style data-emotion-css="1ew8fuc">.css-1ew8fuc{word-break:keep-all;font-size:19px;line-height:3;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;}@media (max-width:33.75em){.css-1ew8fuc{font-size:19px;}}</style><h4 id="筆者の武勇伝" class="css-1ew8fuc efq1zb23">筆者の武勇伝</h4><p class="css-qpdo3c e1yjj5wz0">著者がかつてコンサルタントとして担当した組織</p><ul class="css-rfu7dy emayir50"><li class="css-0">コードモンキーが存在(アーキテクチャや設計を考えず，ただ仕様通りにコードを書く人)</li><li class="css-0">開発チームの大勢が，技術プラクティスの背後にある理由を理解していない</li><li class="css-0">作られたソフトウェアは良い標準から乖離</li><li class="css-0">チームが違えばチームごとの標準</li><li class="css-0">でも開発の中心人物・マネージャーは優秀</li><li class="css-0">開発・QA（品質保証）・運用の対立主義</li></ul><p class="css-qpdo3c e1yjj5wz0">この結果，</p><ul class="css-rfu7dy emayir50"><li class="css-0">「変更を加えづらいコード」</li><li class="css-0">「変更を行うことのコミュニケーションコストが大きい」</li><li class="css-0">「変更を加えるのにものすごい時間がかかる」</li></ul><p class="css-qpdo3c e1yjj5wz0">という状況になり，<em class="css-l2lff efespwh0">みんなやる気がなくなっていった</em>（死のスパイラル）。</p><p class="css-qpdo3c e1yjj5wz0">筆者は，マネージャーらと協力して，業務の20％を上記の現状を改善する活動に充てるようにした。
すると，アジリティの高いソフトウェアを作れる組織に変化させることができた。しかも，これには再現性があり
何回も同じような経験をしたらしい（武勇伝）。</p><style data-emotion-css="pmwkbm">.css-pmwkbm{-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);margin:15px auto 50px;color:var(--theme-ui-colors-articleText,#08080B);font-weight:normal;max-width:780px;padding:30px 30px 30px 30px;background-color:var(--theme-ui-colors-quoteBackground,#fff1c9);foreground-color:black;border-radius:10px;border:solid;padding-top:1em;padding-bottom:1em;border-color:var(--theme-ui-colors-quoteBorder,#ffbb33);color:black;}@media (max-width:45.9375em){.css-pmwkbm{margin:10px auto 35px;}}.css-pmwkbm > h4{font-weight:600;text-align:left;padding:0;}.css-pmwkbm > ol{padding-left:20px;}.css-pmwkbm > p{padding-bottom:0;width:100%;margin:0 auto;font-weight:normal;}@media (max-width:33.75em){.css-pmwkbm > p{padding:10px 0 0 0;}}</style><blockquote class="css-pmwkbm e17fmdax0"><p class="css-qpdo3c e1yjj5wz0">余談。筆者は「自動ユニットテストのないコードはレガシーコードである」と言う。</p></blockquote><h4 id="「ウォーターフォールモデル」" class="css-1ew8fuc efq1zb23">「ウォーターフォールモデル」</h4><p class="css-qpdo3c e1yjj5wz0">ウォーターフォールモデルは，以下のような状況には適している。例は自分で考えてみた。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">まとめてリリースするのが適切なモノ</em></p><ul class="css-rfu7dy emayir50"><li class="css-0">iPhone：部品の性能やサイズの組み合わせを高度に最適化する必要がある。人々を飽きさせないため，
年オーダーの周期で新製品を発表する。</li><li class="css-0">自動車：大量生産のために大規模な製造ラインが必要</li></ul></li><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">リリースするものや，ビジネス状況がある程度予測可能であるモノ</em></p><ul class="css-rfu7dy emayir50"><li class="css-0">橋や道路などの社会インフラ：長期的にニーズがあり，安定してそこにあって欲しい</li><li class="css-0">個人住宅の設計：新しい部屋を追加したいと思うことはめったにない</li></ul></li></ul><p class="css-qpdo3c e1yjj5wz0">しかし，ソフトウェアを取り巻く環境は，上記に当てはまるだろうか？</p><ul class="css-rfu7dy emayir50"><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">ソフトウェアはまとめてリリースすべき？</em></p><ul class="css-rfu7dy emayir50"><li class="css-0">今やほとんどのソフトウェアはインターネットの接続を前提に利用されるので，新しいバージョンを逐次配布できる。
（iPhone で同じことをやろうとすると，個人宅に iPhone 分解マニュアルと部品を郵送して行うことになるけれども）</li><li class="css-0">ソフトウェアは「大量生産」する必要がない。一度作れば同じものを容易に「複製」できる。</li></ul></li><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">リリースするものや，ビジネス状況は予測可能？</em></p><ul class="css-rfu7dy emayir50"><li class="css-0">顧客の刻々と変化するニーズに，素早くサービスを適合させなければ競争上の優位を保てない時代になった。
そしてこの変化を予測することは困難である。</li><li class="css-0">ソフトウェアには日々脆弱性が見つかったりバグが見つかるので，対応していく必要があるが，
どこにこれが発現するかというのは予想できない。</li></ul></li></ul><h4 id="一か八かの勝負" class="css-1ew8fuc efq1zb23">一か八かの勝負</h4><p class="css-qpdo3c e1yjj5wz0">ソフトウェア業界におけるウォーターフォールモデルは，いろんな点で「大博打」である。</p><ul class="css-rfu7dy emayir50"><li class="css-0">複数の機能が「統合」されるまで，それらの各機能にバグがあるかどうかわからない。
コーディングしてしばらく時間が経ってようやく最初のバグに気づくことができる。
小さく作ってすぐに検証できていれば早い段階で気づけたのに。</li><li class="css-0">プロダクトをじっくり時間をかけてリリースしても，もしそれを顧客がそれに「No」を突き付ければこれまでの開発は
無に帰する。例えば，これを避けるために『リーン・スタートアップ』では，MVP をベースに「構築・検証・学習」を高速に
繰り返し，早期に顧客からのフィードバックを得る。</li></ul><blockquote class="css-pmwkbm e17fmdax0"><p class="css-qpdo3c e1yjj5wz0">ソフトウェアを作るのに，こんなにリスキーで間違いやすい方法はほかに想像できない</p></blockquote><h4 id="ウォーターフォールはなぜ機能しないか" class="css-1ew8fuc efq1zb23">ウォーターフォールはなぜ機能しないか</h4><ul class="css-rfu7dy emayir50"><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">「刺激」と「反応」が遠い</em></p><p class="css-qpdo3c e1yjj5wz0">開発・運用・QA は縦割りで分離していることが多く，コミュニケーションコストを減らすために，タスクを一度にまとめる。
これはチームを縦割りにして，プロセスを厳密に分けることで構造的に発生すると私は考える。</p><p class="css-qpdo3c e1yjj5wz0">余談：de:code 2020 の GitOps に関するセッションで，「GitOps 導入により，開発者にプロダクションのオーナーシップ
を移譲することができるようになった。これにより，開発者のプロダクトに対する当事者意識が高まった」という話が
あり，これに通ずるものを感じた。</p></li><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">バッチサイズが大きすぎる</em></p><p class="css-qpdo3c e1yjj5wz0">まとめてデカいものをリリースするようにすると，それに最適化した結果，おのずと拡張性を考慮しないコードがかかれるようになる。
しかし，ソフトウェアの特性上，現実にはコードには変更が伴う。もし，バッチサイズを小さくして，継続的に統合・デプロイ
するようにしておけば，保守性の高いコードがかかれるようになるだろう。</p></li></ul><h4 id="プロセスを重視して目的を見失わない" class="css-1ew8fuc efq1zb23">プロセスを重視して目的を見失わない</h4><p class="css-qpdo3c e1yjj5wz0">著者は，過去の体験から，プロセスを重視することを批判している。例えば，IBM では過去に「ソースコードの全ての行に
プログラマーのコメントを入れること」という規則があったそうだ。
大事なのはプロセスではなく，本来の目的を達成することである。</p><h4 id="ウォーターフォールの功罪" class="css-1ew8fuc efq1zb23">ウォーターフォールの功罪</h4><p class="css-qpdo3c e1yjj5wz0">コーディングよりも最新のドキュメントの維持に膨大な労力が割かれることがある。</p><p class="css-qpdo3c e1yjj5wz0">ソフトウェア開発はリスクが高く，ドキュメントもコードも書いた瞬間から時代遅れになる。
ウォーターフォールのプロセスがよくないのは，初期の設計フェーズが終わったらもう事実上コードを変更するのは
不可能なので，変更を避けるようになってしまうこと。</p><p class="css-qpdo3c e1yjj5wz0">そしてテストも「高価」なので一度で成功させるために最後まで待つ。</p><p class="css-qpdo3c e1yjj5wz0">こうして，痛みや困難を意図的に避けることが良い戦略ということになり，文化も保守的になる。</p><h4 id="ソフトウェア開発に銀の弾丸はない" class="css-1ew8fuc efq1zb23">ソフトウェア開発に銀の弾丸はない</h4><p class="css-qpdo3c e1yjj5wz0">ソフトウェア開発において，最善の選択を下すための道標はなく，状況に応じていく通りもの解があり，厳密にその効果を
見積もることはできない。やってみてはじめてわかるものばかり。</p><h4 id="本章の振り返り" class="css-1ew8fuc efq1zb23">本章の振り返り</h4><ul class="css-rfu7dy emayir50"><li class="css-0">ウォーターフォールは，変更が起こらないことを仮定しているが，現実にそんなことはなく，
いざ修正を加えようとするとその追跡と変更コストは高くつく。</li><li class="css-0">機能をまとめてリリースするのは，逆説的なことに，非効率である。</li><li class="css-0">ウォーターフォールはレガシーコードの温床になる</li><li class="css-0">ソフトウェア工学には，現実の問題にうまく対処できるような基本原則や共通の知識体系が確立されていない。</li></ul><h2 id="第2章-chaosレポート再考" class="css-xwt1i7 efq1zb21">第2章　CHAOSレポート再考</h2><h4 id="chaos-レポート" class="css-1ew8fuc efq1zb23">CHAOS レポート</h4><p class="css-qpdo3c e1yjj5wz0">スタンディッシュグループの CHAOS レポートという，US 最大規模のソフトウェア開発に関するレポートがある。
ここでは，ソフトウェア開発のプロジェクトを「成功」「失敗」「問題あり」の3つにカテゴライズしており，その年次推移を報告している。
この結果によると，1994年には「成功」したプロジェクトは全体の16％にすぎなかったが，2012年には39％にまで増えている。
これは業界の成熟とアジャイルの普及によるものだと考えられるが，依然として，6割のプロジェクトは何らかの問題を抱えている。</p><h4 id="なぜプロジェクトは失敗するのか。" class="css-1ew8fuc efq1zb23">なぜプロジェクトは失敗するのか。</h4><p class="css-qpdo3c e1yjj5wz0">プロジェクトが失敗する要因には，ビジネスの優先度の変化や市場ニーズの変化など，外部要因によるものもあるが，ここでは
技術的な側面についてみていく。筆者は以下のようなもの，プロジェクトを失敗させる技術的要因としてを挙げる：</p><ul class="css-rfu7dy emayir50"><li class="css-0">コードの変更</li><li class="css-0">バグの修正</li><li class="css-0">複雑さの扱い</li></ul><h4 id="コードの変更" class="css-1ew8fuc efq1zb23">コードの変更</h4><p class="css-qpdo3c e1yjj5wz0">一般に，コードの変更それ自体の時間よりも，既存の設計・コードを読んで理解するのに時間がかかる。
そのため，変更が大規模な場合は，全体を理解するのではなく，自分たちの方法で要求された機能を継ぎ足してしまおうとするケースが増える。
その結果，システム全体をテストするのが困難になり，品質は低下し，以降の拡張も難しくなる。</p><p class="css-qpdo3c e1yjj5wz0">既存のソフトウェアに機能を追加するコストは桁外れに高い。というのは，世のほとんどのソフトウェアは
機能拡張をうまく扱えるように設計されておらず，ひとたび機能を追加するならば全体の再設計が必要になるためだ。
このようなハイリスクで高価なソースコードをいじりたくないので，既存のコードをいじらず新しくコードを追加し，継ぎはぎのシステムができる。</p><p class="css-qpdo3c e1yjj5wz0">開発者は，素朴にコードを書くことで変更ができないコードを生み出していることに気づくべきだ。</p><h4 id="バグ" class="css-1ew8fuc efq1zb23">バグ</h4><p class="css-qpdo3c e1yjj5wz0">バグの修正自体は些細ですぐ終わることもあるが，それを見つけ出すのには決まって長い時間がかかる。
MacOSX は 8500万行のソースコードから成る。我々は，バグが見つかりやすいように心がけるべきだ。
また，バグを書くのを防げればもっとよい。</p><h4 id="コードの複雑性" class="css-1ew8fuc efq1zb23">コードの複雑性</h4><p class="css-qpdo3c e1yjj5wz0">2002年，NIST によれば</p><blockquote class="css-pmwkbm e17fmdax0"><p class="css-qpdo3c e1yjj5wz0">ソフトウェアの複雑さは増大し続ける。（略）ソフトウェア開発者はすでにほぼ 80％ の開発コストを障害の特定と障害のために使っている。
これを以てしても，ソフトウェアほど不具合が多い状態で出荷されている製品はほぼない。</p></blockquote><p class="css-qpdo3c e1yjj5wz0">つまり，我々が価値を生み出している時間は開発時間の 20％ しかない。</p><p class="css-qpdo3c e1yjj5wz0">ほとんどのソフトウェアは，読みやすさよりも書きやすさを優先している。こうして書かれたコードには依存性が埋め込まれ，
ある部分が別の部分に依存し … を繰り返して，依存性は追跡できなくなる。これが，メンテナンスコストが 80％ にも膨れ上がる原因となる。</p><h4 id="使われないコード" class="css-1ew8fuc efq1zb23">使われないコード</h4><p class="css-qpdo3c e1yjj5wz0">CHAOS レポートによると，デプロイされた機能の 45％ は使われないということがわかった。
つまり，我々はコストをかけて無駄を作り込んでいることになる。</p><p class="css-qpdo3c e1yjj5wz0">ウォーターフォールでは，ソースコードが後から追加されることは無いか，極めて少ないという前提がある。
そのため，1回の貴重なリリースのタイミングで「今を逃すまい」とたくさんの機能がブチ込まれる。</p><p class="css-qpdo3c e1yjj5wz0">リーンやアジャイルの考え方を使えば，小さく作ってすぐ顧客に使ってもらえるのですぐにフィードバックが得られる。
これにより，無駄を作り込むリスクを回避できる。</p><h4 id="コスト" class="css-1ew8fuc efq1zb23">コスト</h4><p class="css-qpdo3c e1yjj5wz0">少し古いが，<style data-emotion-css="mckguv">.css-mckguv{-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);color:var(--theme-ui-colors-accent,#6166DC);}.css-mckguv:visited{color:var(--theme-ui-colors-accent,#6166DC);opacity:0.85;}.css-mckguv:hover,.css-mckguv:focus{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="http://dl.acm.org/citation.cfm?id=626281" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">2001年の研究(G.Robert, 2001)</a>
によるとソフトウェア開発にかかるコストは以下のようになっている：</p><div style="overflow-x:auto;padding:0 20px"><style data-emotion-css="1fftokq">.css-1fftokq{position:relative;line-height:1.65;color:var(--theme-ui-colors-grey,#73737D);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);background:var(--theme-ui-colors-card,#fff);margin:45px auto 85px;width:100%;max-width:1004px;border:1px solid var(--theme-ui-colors-horizontalRule,rgba(8,8,11,0.15));border-radius:5px;overflow:hidden;border-collapse:separate;}@media (max-width:66.875em){.css-1fftokq{margin:25px auto 65px;}}@media (max-width:45.9375em){.css-1fftokq{max-width:486px;}}@media (max-width:33.75em){.css-1fftokq{margin:15px auto 55px;}}</style><table class="css-1fftokq es4iwbv0"><style data-emotion-css="c8fqfw">.css-c8fqfw{text-align:left;border-collapse:collapse;position:relative;line-height:1.756;font-weight:600;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}</style><thead class="css-c8fqfw eqmc0b40"><tr class="css-0"><style data-emotion-css="b8fldq">.css-b8fldq{padding:18px 30px;font-size:16px;background:var(--theme-ui-colors-card,#fff);}@media (max-width:66.875em){.css-b8fldq{padding:14px 20px;}}@media (max-width:45.9375em){.css-b8fldq{font-size:14px;}}</style><td class="css-b8fldq e1enrns70">工程</td><td class="css-b8fldq e1enrns70">割合</td></tr></thead><tbody><tr class="css-0"><style data-emotion-css="tsefi8">.css-tsefi8{border-top:1px solid var(--theme-ui-colors-horizontalRule,rgba(8,8,11,0.15));padding:15px 30px;font-size:16px;background:var(--theme-ui-colors-card,#fff);}@media (max-width:66.875em){.css-tsefi8{padding:14px 20px;}}@media (max-width:45.9375em){.css-tsefi8{font-size:14px;}}</style><td class="css-tsefi8 e1v3qv0">開発</td><td class="css-tsefi8 e1v3qv0">20%</td></tr><tr class="css-0"><td class="css-tsefi8 e1v3qv0">バグ</td><td class="css-tsefi8 e1v3qv0">11％</td></tr><tr class="css-0"><td class="css-tsefi8 e1v3qv0">拡張</td><td class="css-tsefi8 e1v3qv0">38%</td></tr><tr class="css-0"><td class="css-tsefi8 e1v3qv0">その他</td><td class="css-tsefi8 e1v3qv0">31%</td></tr></tbody></table></div><p class="css-qpdo3c e1yjj5wz0">見ての通り，リリース後のコストはかなり高額である。
これは，ウォーターフォールが「変更を前提としないので，保守性を考慮していない」からである。</p><p class="css-qpdo3c e1yjj5wz0">しかし，実際には表を見てわかるように，ソフトウェアには拡張やバグに伴う修正が入る。
保守性の高いコードを書こう！</p><h4 id="本章の振り返り-1" class="css-1ew8fuc efq1zb23">本章の振り返り</h4><ul class="css-rfu7dy emayir50"><li class="css-0">ソフトウェア開発の失敗による損失は，低く見積もっても年間100億ドル（US のみ）にのぼる。</li><li class="css-0">ソフトウェア開発の非効率なやり方はビジネスに多大な損失をもたらしてきた。我々はこの改善に取り組むべきだ。</li><li class="css-0">CHAOS レポートで指摘されるように，この課題を乗り越えるための道のりは遠い。</li><li class="css-0">私たちの誰もがレガシーコードを作りうる。</li></ul><p class="css-qpdo3c e1yjj5wz0">このようにソフトウェア開発はめちゃくちゃリスクが高い。それでも，成功しているプロジェクトはあり，
彼らは別のアプローチをとっている。次章以降では，そのプラクティスをみていく。</p><h2 id="第3章" class="css-xwt1i7 efq1zb21">第3章</h2><p class="css-qpdo3c e1yjj5wz0">2000年の終わり頃，成功を収めたソフトウェア開発者は，「余計なもの」に気づいていた。
そしてソフトウェア開発に適した，「軽量な」開発手法の体系が生まれようとしていた。</p><p class="css-qpdo3c e1yjj5wz0">そこで，「軽量ソフトウェア開発プロセス」とかいうと真面目に受け止められないだろうと考え，
「アジャイルソフトウェア開発プロセス」という命名がなされた。
アジャイルの背後には，XP（エクストリーミングプログラミング），リーンなどの概念がある。</p><p class="css-qpdo3c e1yjj5wz0">これらの先人の取り組みは，「レガシー」との闘いの始まりだった。</p><h4 id="アジャイル" class="css-1ew8fuc efq1zb23">アジャイル</h4><p class="css-qpdo3c e1yjj5wz0">アジャイルマニフェストには，</p><blockquote class="css-pmwkbm e17fmdax0"><p class="css-qpdo3c e1yjj5wz0">私たちは，ソフトウェア開発の実践あるいは実戦を手助けする活動を通じて，よりよい開発方法を見つけ出そうとしている。</p></blockquote><p class="css-qpdo3c e1yjj5wz0">とある。これを筆者なりに言うと，以下の考え方が根底にあるらしい：</p><ul class="css-rfu7dy emayir50"><li class="css-0">顧客満足を最優先し，価値のあるソフトウェアを早く提供する</li><li class="css-0">プロセスを増やすよりも，よりプロセスを少なくし，開発者が集中してエンジニアリングプラクティスを適用できるようにする</li></ul><p class="css-qpdo3c e1yjj5wz0">このエンジニアリングプラクティスというのは，XP における TDD や ペアプログラミングである。
これらを取り入れ，デプロイ，運用，拡張が簡単で変更可能なソフトウェアを作れるようになるという信念があったらしい。
そして実際こっちの方が効果があったらしい。</p><h4 id="小さいほど良い" class="css-1ew8fuc efq1zb23">小さいほど良い</h4><p class="css-qpdo3c e1yjj5wz0">長距離マラソンランナーは，「近めのゴール」を設定して走っていると言われる。「あの街灯までいくぞ！」と思えば，
42.195km に比べればなんとかなりそう，簡単そうだと思える。例えばスクラムでは，1スプリントで
<em class="css-l2lff efespwh0">「大きなタスクを，目に見える成果を作り出す単位に落とし込む」</em>。これにより，<em class="css-l2lff efespwh0">タスクの見積もり，実装，検証</em> が容易になる。</p><p class="css-qpdo3c e1yjj5wz0">そして，このタスクのライフサイクルがすぐに終わるほど良く，作業に取り掛かって進展が無い状態（顧客に提供していない＝無駄な状態）
を短くした方が良い。</p><h4 id="やり方ではなく，目的と理由" class="css-1ew8fuc efq1zb23">やり方ではなく，目的と理由</h4><p class="css-qpdo3c e1yjj5wz0">アジャイルでは，仕様書ではなく，プロダクトオーナーと開発者の会話を重視する。
<em class="css-l2lff efespwh0">ユーザーストーリー</em> という概念が登場するのは，これを会話のきっかけにするためである。
そして，プロダクトオーナーはユーザーストーリーをもとに顧客と会話する。
ここで顧客の要求から詳細な仕様を聞き出して，その先も仕様書を維持管理しているとすれば，それは
プロダクトオーナー付きのウォーターフォールに他ならない。</p><h4 id="本章の振り返り-2" class="css-1ew8fuc efq1zb23">本章の振り返り</h4><p class="css-qpdo3c e1yjj5wz0">TODO: 書く</p><blockquote class="css-pmwkbm e17fmdax0"><p class="css-qpdo3c e1yjj5wz0">多くのアジャイルチームは技術プラクティスを認識していないか，適用の仕方が間違っているために，期待した利益を得られないでいる。
プラクティスを適切に適用するには，その背後にある原則を理解しなければいけないのだ。</p></blockquote><h2 id="第２部-ソフトウェアの寿命を延ばし価値を高める9つのプラクティス" class="css-xwt1i7 efq1zb21">第２部　ソフトウェアの寿命を延ばし価値を高める9つのプラクティス</h2><p class="css-qpdo3c e1yjj5wz0">すげー開発者は，普通の人がやらないちょっとしたことを普段から心がけることで優れた開発者となっていて，その技能は学習可能である。
我々も，彼らが身につけた原則やプラクティスを理解して実践しよう。</p><h2 id="第4章-9つのプラクティス" class="css-xwt1i7 efq1zb21">第4章　9つのプラクティス</h2><p class="css-qpdo3c e1yjj5wz0">プラクティスの背後には原理がある。ソフトウェア開発では，この原理が次第に確立されようとしている。</p><p class="css-qpdo3c e1yjj5wz0">その例として，</p><ul class="css-rfu7dy emayir50"><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">単一責務の原則</em>
「クラスを変更する理由は一つでなければいけない」</p></li><li class="css-0"><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">開放・閉鎖の原則</em>
　「ソフトウェアのエンティティ（クラス・関数・モジュール）は拡張に対して開き，変更に対して閉じなければいけない」</p></li></ul><p class="css-qpdo3c e1yjj5wz0">がある。こうした原則（本書では2つを挙げるにとどまっているが）を実現することがソフトウェア開発の崇高なゴールであり，すべてのプラクティスが
これを実現するようなものでなければならない（つまり憲法）。</p><p class="css-qpdo3c e1yjj5wz0">本書紹介するプラクティスは，こうしたソフトウェア開発で確立されようとしている原則を実現する9つのプラクティスを紹介するが，それらは以下の配慮されている：</p><ul class="css-rfu7dy emayir50"><li class="css-0">多くの場合に価値がある</li><li class="css-0">学ぶのが容易で，教えるのが容易である</li><li class="css-0">実施がシンプルで，考えなくてもやれる</li></ul><p class="css-qpdo3c e1yjj5wz0">これらの条件を満たしていないと，プラクティスは継続しづらいものとなる。人間は怠惰なので，極力やりやすい仕組みを作る必要がある。</p><p class="css-qpdo3c e1yjj5wz0">さて，先ほど原則の話が出たが，プラクティスはそれだけを盲目的に取り入れれば良いというものではない。きちんと原則を理解して，なぜそのプラクティスが有効なのか
ちゃんと説明できる必要がある。そうすることでより効果的に適用できるようになる。</p><h4 id="良いコード" class="css-1ew8fuc efq1zb23">良いコード</h4><p class="css-qpdo3c e1yjj5wz0">価値のあるソフトウェアには変更が伴う。つまり，ユーザーがソフトウェアから価値を引き出す新たな方法を見つけたことを意味するからだ。
価値のあるソフトウェアは将来変更されることになる。こうした背景を踏まえると，ソースコードはどのような状態にしておくのが良いだろうか。</p><p class="css-qpdo3c e1yjj5wz0">筆者は次のようにいう。</p><p class="css-qpdo3c e1yjj5wz0">「既存ソフトのバグ対応・機能追加のコストを考えると，何を差し置いても，ソフトウェアは当初の機能要件を満たし将来のニーズに
対応できるように変更しやすくすべきだ。ソフトウェアを変更可能にできれば，初期開発の ROI を改善できる」</p><p class="css-qpdo3c e1yjj5wz0">「ソフトウェアは資産であり，資産価値は現在生み出せる価値だけでなく，将来に生み出される価値にも依存する。ソフトウェア開発にも
ライフサイクルマネジメントが必要だ」</p><p class="css-qpdo3c e1yjj5wz0">また，筆者は次のような「品質」こそ重視すべきだという。</p><p class="css-qpdo3c e1yjj5wz0">ソースコード・ソフトウェアには，「カバレッジ」「速さ」などの外部指標が存在するが，これはブラックボックスなソフトウェアの
ある一面が数値化できたにすぎない。本書でいう「品質」は，「変更を加えやすいコードか」「わかりやすいコードか」
「リファクタリングされているか」といった <em class="css-l2lff efespwh0">内部品質</em> を「品質」と読んでいる。これを作り込んだ結果，外部品質が向上する。</p><p class="css-qpdo3c e1yjj5wz0">これは，「アジャイルをやっている」だけでは実現できない。アジャイルの背後にある原則を理解してはじめて効果的に
内部品質を向上させることができる。</p><h4 id="9つのプラクティス" class="css-1ew8fuc efq1zb23">9つのプラクティス</h4><p class="css-qpdo3c e1yjj5wz0">筆者は，こうしたいろんなスクラムや XP のプラクティスから，9つを抽出した。</p><style data-emotion-css="k9m2ww">.css-k9m2ww{list-style:none;counter-reset:list;color:var(--theme-ui-colors-articleText,#08080B);position:relative;padding:6px 0px 10px 35px;margin:0 auto;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);font-size:18px;width:100%;max-width:780px;}@media (max-width:66.875em){.css-k9m2ww{max-width:507px;}}@media (max-width:45.9375em){.css-k9m2ww{max-width:486px;padding-left:0px;}}@media (max-width:33.75em){.css-k9m2ww{padding-left:20px;}}.css-k9m2ww li{position:relative;padding-bottom:15px;}@media (max-width:45.9375em){.css-k9m2ww li{padding-left:30px;}}@media (max-width:33.75em){.css-k9m2ww li{padding-left:30px;}}@media (max-width:45.9375em){.css-k9m2ww li p{padding:0;}}@media (max-width:33.75em){.css-k9m2ww li p{padding:0;}}.css-k9m2ww li::before{width:3rem;display:inline-block;position:absolute;}.css-k9m2ww li::before{counter-increment:list;content:counter(list) '.';font-weight:600;position:absolute;left:-3rem;top:-0.3rem;font-size:2rem;}@media (max-width:45.9375em){.css-k9m2ww li::before{left:0;}}</style><ol class="css-k9m2ww e3t4y0j0"><li class="css-0">やり方より先に目的，理由，誰のためかを伝える</li><li class="css-0">小さなバッチで作る</li><li class="css-0">継続的に統合する</li><li class="css-0">協力し合う</li><li class="css-0">「CLEAN」コードを作る</li><li class="css-0">まずテストを書く</li><li class="css-0">テストでふるまいを明示する</li><li class="css-0">設計は最後に行う</li><li class="css-0">レガシーコードをリファクタリングする</li></ol><p class="css-qpdo3c e1yjj5wz0">全てを厳密に徹底してやる必要はないが，ソフトウェア開発や保守におけるコスト削減の出発点になるだろう…</p><h4 id="本章の振り返り-3" class="css-1ew8fuc efq1zb23">本章の振り返り</h4><ul class="css-rfu7dy emayir50"><li class="css-0">使われるソフトウェアには必ず変更が起こる。変更可能となるように書かれるべきだ。</li><li class="css-0">何かを正確にモデル・システムにするためには，システム対象を理解しなければならない。</li><li class="css-0">すごい人がやってることは学習可能である。</li><li class="css-0">未来を完全に予測できる能力より，必要になった時にすぐ変更を加えられるような能力の方が大事だ。</li><li class="css-0">ソフトウェア開発には独特の課題があり，これらに対応するためにはプラクティスの背後にある原則を理解する必要がある。</li></ul><h2 id="第8章-プラクティス4-協力し合う" class="css-xwt1i7 efq1zb21">第8章　プラクティス4　協力し合う</h2><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">平行遊び</em></p><p class="css-qpdo3c e1yjj5wz0">幼児が同じ部屋で，別々のおもちゃで遊んでいることがある。しかし，彼らは互いの様子を観察していて，何をやっているか知っているが，お互いにふれあうことはない。</p><p class="css-qpdo3c e1yjj5wz0">3~4 歳になると，「中年に至るまで続く複雑な人間同士の相互作用のニュアンスを理解し始める」。</p><p class="css-qpdo3c e1yjj5wz0">我々も，仕事で <strong class="css-0">平行遊び</strong> をしていないだろうか？</p><h4 id="コミュニケーションと協働" class="css-1ew8fuc efq1zb23">コミュニケーションと協働</h4><p class="css-qpdo3c e1yjj5wz0">ソフトウェア開発は社会的な活動である。</p><p class="css-qpdo3c e1yjj5wz0">「多くのコミュニケーションと相互作用を伴う。常に学び，常に交流し，抽象を扱い，抽象を語る。したがって，人と人との調整が極めて重要になる。」</p><p class="css-qpdo3c e1yjj5wz0">ソフトウェア開発には人と人の円滑なコミュニケーションが不可欠であるにもかかわらず，人と人をスペーサーで区切り，<strong class="css-0">平行遊び</strong> をしている職場は多い。</p><p class="css-qpdo3c e1yjj5wz0">確かに，常にお互い顔が見えるようなデスク（共同体空間）で仕事をすることを，個人スペースの侵害やプライバシーがないと感じる人も多い。</p><p class="css-qpdo3c e1yjj5wz0">しかし，ソフトウェア開発における人間的で抽象的な営みの効率を最大化するのは，空間をオープンにし，風通しをよくすることである。</p><h4 id="エクストリームプログラミング" class="css-1ew8fuc efq1zb23">エクストリームプログラミング</h4><p class="css-qpdo3c e1yjj5wz0">これは，ケント・ベックが自身のソフトウェア開発の成功体験から導かれた手法で，
「アジャイル開発でうまくいくことを，理論的に極限まで突き詰めた」ので，エクストリームプログラミングと名付けられた。</p><h4 id="ペアプログラミング" class="css-1ew8fuc efq1zb23">ペアプログラミング</h4><p class="css-qpdo3c e1yjj5wz0">開発者2人が1台のコンピュータを使って協働をすること。XP のプラクティスの中で最も価値がありながら過小評価されている。</p><p class="css-qpdo3c e1yjj5wz0">2人で1つのことをやるので，「リソース」を半分浪費することになると誤解されている。実際は，以下のようなメリットがある。</p><ul class="css-rfu7dy emayir50"><li class="css-0">プログラミングにおける暗黙知が共有され，属人化したコーディングスタイルを回避できる。</li><li class="css-0">「監視」<ul class="css-rfu7dy emayir50"><li class="css-0">手抜きコードを書かなくなる（適切な命名，コメントをつけるようになる）。</li><li class="css-0">いい緊張感があり，仕事に専念できる。</li></ul></li><li class="css-0">知識共有における文書化のコストを減らせる。</li><li class="css-0">「小さなバッチ」で仕事をできる（小さなプルリクエストとコードレビューをやるイメージ）。
- 協働の気持ちが高まり，コミュニケーションが円滑になる。</li><li class="css-0">ソースコードの「共同所有」</li></ul><p class="css-qpdo3c e1yjj5wz0">「デカいピアノを1人では運べないが，2人でやれば運ぶことができる」</p><p class="css-qpdo3c e1yjj5wz0">理想的には，コーディングスタイルについて文書を書かず，ペアプロで共有できる方が良い。
コード自体が，コーディングスタイルのガイドになっている状態が望ましい。</p><p class="css-qpdo3c e1yjj5wz0">ペアプロというのは，本質的には「書きながら行うコードレビュー」である。コードレビューのエクストリーム版である。
なので，ペアプロにおいてもコードレビューと同じ観点で議論をする。
例えば，コーディングスタイルの議論よりも，設計の理由や，設計のトレードオフなどについて議論した方が良い。</p><h4 id="ペアの組み方" class="css-1ew8fuc efq1zb23">ペアの組み方</h4><ul class="css-rfu7dy emayir50"><li class="css-0">開発者の強み，弱みを補完しあう関係（フロントエンド＆バックエンド）</li><li class="css-0">経験者がある人と，ない人</li><li class="css-0">ランダムに人を割り当てる 👈 著者推奨</li></ul><h4 id="バディプログラミング" class="css-1ew8fuc efq1zb23">バディプログラミング</h4><p class="css-qpdo3c e1yjj5wz0">「ペアプロはエクストリームだ」と感じる人もいる。とはいっても，開発者には頻繁にフィードバックがあった方が良い。
ということで，段階的にエクストリームになるために，まずは「タスク完了時」「夕会」など，書いたコードについてレビューをする。</p><h4 id="レトロスペクティブ" class="css-1ew8fuc efq1zb23">レトロスペクティブ</h4><p class="css-qpdo3c e1yjj5wz0">イテレーションの終わりに，チーム全員で集まって，「よかったこと」「わるかったこと」をざっくばらんに話す。
フォーマルで堅苦しい感じにならない方がよい。
些細な問題でも共有したほうがよい。いろんな問題から，アンチパターンの発見に繋がる。</p><p class="css-qpdo3c e1yjj5wz0">この取り組みは，医療では「ポストモーテム」，軍事では「デブリーフィング」と呼ばれる。</p><h4 id="学習を増やし，知識を広げる" class="css-1ew8fuc efq1zb23">学習を増やし，知識を広げる</h4><p class="css-qpdo3c e1yjj5wz0">以前はスペシャリストになれば仕事は保証され，替えの効かない知識があれば解雇されることもなかった。知識は硬貨のようなものだった。
こうした構造では，なかなか自分の知識を広く共有しようというモチベは生まれづらかった。</p><p class="css-qpdo3c e1yjj5wz0">しかし今日，勉強会に参加したりカンファレンスで知識を共有する人がプレゼンスを高め，キャリアアップする世の中になっている。
学んだことを人に教える（教えられる程度に理解する）ことで，自分も業界全体もよくなる。そういう方向になっとる。</p><h4 id="ペアプロ-7つの戦略" class="css-1ew8fuc efq1zb23">ペアプロ　7つの戦略</h4><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">とにかくやってみる</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">ペアプロは正しい方法でやれば，絶対好きになる。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">ドライバーとナビゲーターが参加する</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">ドライバーはコードを書き，ナビゲーターはテストを書いたり，全体を見通して議論する。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">役割を頻繁に交代する</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">20〜60分ごとにドライバーとナビゲーターを交代する。双方向で学ぶ。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">正直な1日を過ごす</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">ペアリング＝一日中「オン」の状態になるので，一緒に濃密な時間を過ごす。隠し事をすると無駄にエネルギー使うぞ。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">すべての組み合わせを試す</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">いろんな組み合わせ，ペアリング時間，役割交代時間を試して，チームに合うやり方を模索しよう。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">詳細はチームで決める</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">マネジメント側から強制されて決めるのではなく，チームの価値観にあうやり方をみつける。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">進捗を追跡する</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">ペアリングの価値を計測する。ベロシティ，障害，コード品質を追跡することで，これらが改善するのがわかるはず。</p><h4 id="レトロスペクティブ-7つの戦略" class="css-1ew8fuc efq1zb23">レトロスペクティブ　7つの戦略</h4><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">小さな改善を探す</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">組織は，大きくかつ同時多数の変化を好まないが，小さな変化を小さなステップで繰り返すことならやりやすい。
こうした習慣を付ければ，変化に順応しやすい組織風土ができてくる。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">プロセスを責めよ，人は責めない。</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">人を責めても問題は解決しない。多くの場合，人の問題は，組織やプロセスによって構造的に引き起こされ，再現性がある（これは私の持論）。
人を責めず，問題の発生を許しているプロセスの問題を見つける。</p><p class="css-qpdo3c e1yjj5wz0">例）レビューで同じような指摘がおこるのを防ぐために，PR テンプレートを用意して，最低限チェックすべき項目を用意する。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">5回の「なぜ」</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">「なぜ」を繰り返して根本的な課題を探す。繰り返した先に，予想しなかった問題が見つかる。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">根本原因に取り組む</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">対処療法ではなく，問題の根本原因に対処する。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">全員の意見を聞く</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">チーム全員がレトロスペクティブに参加する。声の大きい人だけでなく，みんながフェアに発言できるようにする。
継続的改善は全員の責務である。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">人に権限を</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">改善に必要な物を人に与えること。変化をサポートすること。変化に対する率先を評価することを示すこと。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">進捗を測る</strong></li></ul><p class="css-qpdo3c e1yjj5wz0">誰もが目標とできる計測可能な成果，メトリクスを用意し，ゴールに向かってチームが進んでいることを全員が確認できるようにすること。</p><h4 id="本章のふりかえり" class="css-1ew8fuc efq1zb23">本章のふりかえり</h4><p class="css-qpdo3c e1yjj5wz0">ソフトウェア開発は，抽象的な営みで，人同士のコミュニケーションが欠かせない。
知識をグループに広めるために，協働しよう。</p><ul class="css-rfu7dy emayir50"><li class="css-0">質の高いコミュニケーションとチームへの知識拡散のために，適切なテクニックを使う（ペアプロ，バディプログラミングなど）</li><li class="css-0">未知の探究，学習の増幅，知識の伝搬に，協働スキルを活用しよう</li><li class="css-0">コードレビュー，レトロスペクティブで常にフィードバックがもらえる仕組みをつくろう</li><li class="css-0">チーム全員がメンターであり，メンティーであれ。みんなが学び，教え合う関係になろう</li></ul><h2 id="第9章-プラクティス5-「clean」コードを作る" class="css-xwt1i7 efq1zb21">第9章　プラクティス5　「CLEAN」コードを作る</h2><p class="css-qpdo3c e1yjj5wz0">コードの品質指標，<em class="css-l2lff efespwh0">CLEAN</em> とは</p><ul class="css-rfu7dy emayir50"><li class="css-0">ロバート・マーチンが『Clean Code: アジャイルソフトウェア達人の技』で提唱。</li><li class="css-0">コードの品質の指標についてのアクロニム（頭文字）</li></ul><p class="css-qpdo3c e1yjj5wz0">それぞれ，</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">Cohesive</strong> : 凝集性</li><li class="css-0"><strong class="css-0">Loosely Coupled</strong> : 疎結合</li><li class="css-0"><strong class="css-0">Encapsulated</strong> : カプセル化</li><li class="css-0"><strong class="css-0">Assertive</strong> : 断定的</li><li class="css-0"><strong class="css-0">Nonredundant</strong> : 非冗長</li></ul><p class="css-qpdo3c e1yjj5wz0">簡単にいうと，オブジェクトは特定が明確に定義されていて（<strong class="css-0">凝集性</strong>），はっきりした責務を担い（<strong class="css-0">疎結合</strong>），実装は隠蔽されているべきだ(<strong class="css-0">カプセル化</strong>)。
オブジェクトの状態は自分自身が管理し（<strong class="css-0">断定的</strong>），オブジェクトの定義は一度だけにすべきだ（<strong class="css-0">非冗長</strong>）。という原則。</p><h3 id="高品質のコードは凝集性が高い" class="css-13h9ymw efq1zb22">高品質のコードは凝集性が高い</h3><p class="css-qpdo3c e1yjj5wz0">それぞれの部品は一つのものだけを扱う。それぞれのクラスが自分の責任に集中し，自分の仕事をうまくやるように設計する。
こうしておけば，何か1つの変更が必要が生じた時に，対応するクラスだけ変更すればよくなる。
変更による影響調査とテストが簡単になる。</p><p class="css-qpdo3c e1yjj5wz0">そのようなクラスには，その責任を表す端的な命名が可能である。もし命名できないなら，色々やらせすぎている可能性がある。</p><h3 id="高品質のコードは疎結合である" class="css-13h9ymw efq1zb22">高品質のコードは疎結合である</h3><p class="css-qpdo3c e1yjj5wz0">オブジェクト間の関係を明確な意図を持った状態に保つことを「疎結合」という。
疎結合なコードは，それを利用しているコードに対して <strong class="css-0">間接的にしか依存しない</strong> 。よって，分離，検証，再利用，拡張が楽になる。</p><p class="css-qpdo3c e1yjj5wz0">疎結合は通常，間接的な呼び出しによって実現される。サービスを直接呼び出すのではなく，中間層を通じて呼び出す。
これにより，サービスに変更があっても呼び出し元の変更の影響を減らすことができる。</p><h3 id="高品質のコードはカプセル化されている" class="css-13h9ymw efq1zb22">高品質のコードはカプセル化されている</h3><p class="css-qpdo3c e1yjj5wz0">実装の詳細は，外部の世界からは見えなくなっている。</p><p class="css-qpdo3c e1yjj5wz0">より厳密にいうと <em class="css-l2lff efespwh0">カプセル化</em> とは，以下を切り離すことである。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">インタフェース</strong>（自分がやろうとしていること）</li><li class="css-0"><strong class="css-0">実装</strong>（どうやってやるか） </li></ul><p class="css-qpdo3c e1yjj5wz0">中で何やっているかを隠蔽し，入出力だけを公開するので，他のコードに影響を与えずに自由にコードを変えられるようになったり，
コードがモジュール化されるので扱いやすくなるなどのメリットがある。</p><h4 id="アウトサイドインプログラミング" class="css-1ew8fuc efq1zb23">アウトサイドインプログラミング</h4><p class="css-qpdo3c e1yjj5wz0">コンシューマの観点で機能を設計する。サービスはクライアントのニーズに基づいて設計される。
サービスが何をやっているかを示す名前をつけ，<em class="css-l2lff efespwh0">それがどう動くかは隠す</em>。
これによって，サービスの高レベルの結合を意識できるようになる。</p><h4 id="インサイドアウトプログラミング" class="css-1ew8fuc efq1zb23">インサイドアウトプログラミング</h4><p class="css-qpdo3c e1yjj5wz0">問題を小さなかたまりに分解し，それらを縫い合わせて1つのソリューションを作るというもの。
実際にコーディングにいきつくまでに必要になる。ただし，全体像への配慮が欠けると責任が明確でない壊れやすいコードが生まれがち。</p><p class="css-qpdo3c e1yjj5wz0">良いカプセル化のためには，上記の2つの視点が必要だが，やはり，高レベルの視点で眺めることが肝要。</p><p class="css-qpdo3c e1yjj5wz0">そのコンポーネントは，<strong class="css-0">何なのか，何のためにあるのか</strong> から始める。</p><p class="css-qpdo3c e1yjj5wz0">こうした高レベルの視座があれば，コンピュータのバックグラウンドがないドメインエキスパートとのコミュニケーションも可能になる。
詳細を切り離しておけば，チーム全体でシステム化対象の理解がしやすくなり，コミュニケーションコストも下がるし，柔軟性，一貫性の向上に役立つ。</p><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">ソフトウェアがどう作られているかではなく，ソフトウェアを使うことによって得られる体験から始める。</em></p><h4 id="カプセル化の方法" class="css-1ew8fuc efq1zb23">カプセル化の方法</h4><p class="css-qpdo3c e1yjj5wz0">色々ある。</p><ul class="css-rfu7dy emayir50"><li class="css-0">概念を抽象化して隠す</li><li class="css-0">メソッド化する</li><li class="css-0">インタフェースを導入する</li></ul><p class="css-qpdo3c e1yjj5wz0">ソフトウェア開発においていつでも通用する「知らぬが仏」パターンがある。依存が少なければ少ないほど，コードの変更は簡単になる。</p><p class="css-qpdo3c e1yjj5wz0">しかし，カプセル化したものを公開する必要がある時もある。その時は，必要に応じて小出しに公開する。</p><p class="css-qpdo3c e1yjj5wz0">とりあえずクラスのデータを <code class="css-0">private</code> で宣言しておいて，必要があれば <code class="css-0">getter</code>, <code class="css-0">setter</code> などでアクセスできるようにする。</p><p class="css-qpdo3c e1yjj5wz0">カプセル化を習慣化することで，呼び出し元を意識して設計するようになる。入出力が明確になり，システムの相互作用における副作用が減り，
コードを説明する明確なドキュメントにもなる。</p><p class="css-qpdo3c e1yjj5wz0">メソッドシグネチャなどは，カプセル化の良い方法である。これは「実装ではなくインタフェースをプログラムする」というパターンである。</p><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">必要なものだけを公開し，それ以外は隠すこと。</em></p><h3 id="高品質のコードは断定的である。" class="css-13h9ymw efq1zb22">高品質のコードは断定的である。</h3><p class="css-qpdo3c e1yjj5wz0">断定的とは？</p><p class="css-qpdo3c e1yjj5wz0">👉 自分が何をやるコードなのか，自分の責任はどこなのかはっきりしている。</p><blockquote class="css-pmwkbm e17fmdax0"><p class="css-qpdo3c e1yjj5wz0">問 🔍</p><p class="css-qpdo3c e1yjj5wz0"><strong class="css-0"><code class="css-0">Docs</code> の印刷を制御するコードは， <code class="css-0">Docs</code> クラスの一部にするべきか，<code class="css-0">Printer</code> クラスにすべきか。</strong> </p><ul class="css-rfu7dy emayir50"><li class="css-0">一見 <code class="css-0">Printer</code> クラスが良さげだが，印刷する中身は <code class="css-0">Docs</code> が持つ。つまり，印刷を制御する要素の一つが
<code class="css-0">Printer</code> 以外にあり得ることを示す。</li><li class="css-0"><code class="css-0">Printer</code> は，<code class="css-0">Docs</code> が <!-- -->*<!-- -->.pdf か <!-- -->*<!-- -->.jpg という <code class="css-0">Docs</code> 特有の事情を扱いたくない。そんな実装をしていたら，
新しい拡張子が追加されたときに，<code class="css-0">Printer</code> まで影響を受けてしまう。</li></ul></blockquote><p class="css-qpdo3c e1yjj5wz0">上記のような問題は，SOLID 原則の <strong class="css-0">依存性逆転の方速</strong> ＝ 具象は抽象に依存しなければならない　とも関連する。</p><p class="css-qpdo3c e1yjj5wz0">筆者は，他のオブジェクトとの依存性が多いオブジェクトを「好奇心旺盛なオブジェクト」という。</p><p class="css-qpdo3c e1yjj5wz0">オブジェクトが機能するために，常に何らかのオブジェクトを参照する必要があり，いずれそれは人で追えなくなる。</p><p class="css-qpdo3c e1yjj5wz0">これは先ほど述べた <em class="css-l2lff efespwh0">カプセル化</em> の原則とも反する。</p><p class="css-qpdo3c e1yjj5wz0">なので，オブジェクト自身で状態を管理できる方が良い。</p><p class="css-qpdo3c e1yjj5wz0">こうした問題はなかなかわかりづらいので，普段から適切な場所に移すようにした方が良い。</p><h3 id="高品質なコードは冗長でない" class="css-13h9ymw efq1zb22">高品質なコードは冗長でない</h3><p class="css-qpdo3c e1yjj5wz0">ミッションクリティカルなアプリケーションは冗長でも良い。人の命がかかっているから。そしてこれは，意図的な冗長である。</p><p class="css-qpdo3c e1yjj5wz0">ここでは，<em class="css-l2lff efespwh0">意図しない冗長</em> について語る。c.f. DRY原則 (Don’t Repeat Yourself)</p><p class="css-qpdo3c e1yjj5wz0">長ったらしいコードがあって，それを別の場所で使いたい時，コピペした方が良いだろうか？おそらく，関数名をつけて使いまわした方が良い。</p><blockquote class="css-pmwkbm e17fmdax0"><p class="css-qpdo3c e1yjj5wz0">💡余談：『リーダブル・コード』では，<code class="css-0">/util</code> （ユーティリティ用のコード置き場）を用意することを推奨している。</p></blockquote><p class="css-qpdo3c e1yjj5wz0">コードを書いた当事者なら，「ああ，これはこのパターンをコピペしたんだな」とすぐわかるが，時間が経てば一目ではわからなくなる。</p><p class="css-qpdo3c e1yjj5wz0">ちゃんと一つの関数にまとめておけば，そんな労力は必要なかったのに〜ということになりかねない。</p><p class="css-qpdo3c e1yjj5wz0">1つで済むもの冗長になっていると，テストもビルドも読む時間も冗長になってつらくなる。できるだけまとめて抽象化しよう。</p><h3 id="コード品質が私たちを導いてくれる" class="css-13h9ymw efq1zb22">コード品質が私たちを導いてくれる</h3><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">CLEAN コード</em> の原則は，ちまちましたものかもしれない。でも，これらは，</p><ul class="css-rfu7dy emayir50"><li class="css-0">オブジェクトははっきりと定義された特徴を持つ</li><li class="css-0">オブジェクトは自分の責任に注力する</li><li class="css-0">オブジェクトの実装の詳細は隠されている</li><li class="css-0">オブジェクトの自身の状態は自分で管理する</li><li class="css-0">オブジェクトは一度だけ定義される</li></ul><p class="css-qpdo3c e1yjj5wz0">という恩恵を与えてくれる。</p><p class="css-qpdo3c e1yjj5wz0">長ったらしいが，</p><ul class="css-rfu7dy emayir50"><li class="css-0">コードに<em class="css-l2lff efespwh0">凝集性</em>があれば，理解もバグを見つけるのも簡単になる。それぞれのエンティティは1つのことしか扱っていないから。</li><li class="css-0">コードが<em class="css-l2lff efespwh0">疎結合</em>であれば，エンティティ間の副作用が起こることも少なくなる。テスト・再利用・拡張がより簡単になる。</li><li class="css-0">コードが<em class="css-l2lff efespwh0">カプセル化</em>されていれば，複雑さを管理し，呼び出し元がその先の詳細を知らなくても良いように維持できる。詳細を変更しても，呼び出し元に変更は必要ない。</li><li class="css-0">コードが<em class="css-l2lff efespwh0">断定的</em>であれば，振る舞いを配置する場所が，依存データがある場所であることを示す。</li><li class="css-0">コードが<em class="css-l2lff efespwh0">冗長でない</em>なら，バグ修正や変更を1箇所で1回だけやればよい。</li></ul><p class="css-qpdo3c e1yjj5wz0">これらの原則は，相互に独立しているわけではないので，どれかを達成すると他のも達成できるような感じになっている。
コードをチェックするときの観点として1個2個妥当そうなものについて着目すると良さそうである。</p><p class="css-qpdo3c e1yjj5wz0">筆者が好きな原則は <strong class="css-0">Cohesive（凝集性）</strong> だそうだ。これは簡単に見つけて直せる。コードがやっていることに名前をつけることを
手助けしてくれる。</p><h3 id="明日のベロシティのために今日品質を上げる。" class="css-13h9ymw efq1zb22">明日のベロシティのために今日品質を上げる。</h3><h4 id="技術的負債" class="css-1ew8fuc efq1zb23">技術的負債</h4><p class="css-qpdo3c e1yjj5wz0">技術的負債とは，開発中に学習したことをコードに反映しなかったときにおこる「負債」を説明するものだ。</p><p class="css-qpdo3c e1yjj5wz0"><a href="http://c2.com/cgi/wiki?WardExplainsDebtMetaphor" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">ウォード・カニンガムによる，技術的負債の説明</a></p><p class="css-qpdo3c e1yjj5wz0">その時に対応しておけばすぐ終わるものを，先延ばしにすることで，同じリファクタリングをするのに数倍もの時間がかかってしまう。
コードの知識が失われてしまうためだ。</p><blockquote class="css-pmwkbm e17fmdax0"><p class="css-qpdo3c e1yjj5wz0">「確かに，カプセル化のために新しいクラスを作って波カッコを余分に入力しなければいけないかもしれないが，これまでソフトウェア開発において
タイピングがボトルネックになったことなどあるだろうか？」</p></blockquote><p class="css-qpdo3c e1yjj5wz0">ベロシティが高く，ビジネス状況に対応ｓ知恵最高のソフトウェアを顧客に届けられる組織では，
みな <em class="css-l2lff efespwh0">CLEANで高品質のソフトウェア</em> を土台にしていた。（著者談）</p><p class="css-qpdo3c e1yjj5wz0">次の章では，ちゃんといいコードを書けているかチェックする方法を伝授する。それが，テスト・ファーストなプラクティスだ。</p><h3 id="コード品質を上げる7つの戦略" class="css-13h9ymw efq1zb22">コード品質を上げる7つの戦略</h3><p class="css-qpdo3c e1yjj5wz0">人によって品質の定義は様々だ。やはり，開発の前に，品質について合意が取れておくのが良い。</p><h4 id="1-品質の定義を明確にする" class="css-1ew8fuc efq1zb23">1 品質の定義を明確にする</h4><p class="css-qpdo3c e1yjj5wz0">高品質のコードとはどういう特徴を持つべきか，確認する。</p><h4 id="2-品質のためのプラクティスを共有する" class="css-1ew8fuc efq1zb23">2 品質のためのプラクティスを共有する</h4><p class="css-qpdo3c e1yjj5wz0">どうやったら，高品質を維持できるか。そのプラクティスについて考えて，共有する。</p><p class="css-qpdo3c e1yjj5wz0">#### 3 完璧主義を手放す</p><ul class="css-rfu7dy emayir50"><li class="css-0">完璧に作るのは不可能である。</li><li class="css-0">限りある，必要最小限の受入基準をもっておけば，作り込みすぎる（金メッキ）を避けることができる。</li></ul><h4 id="4-トレードオフを理解する" class="css-1ew8fuc efq1zb23">4 トレードオフを理解する</h4><p class="css-qpdo3c e1yjj5wz0">開発者だけでなく，ステークホルダーを把握などプロジェクトの全体像を把握し，どこにどういうトレードオフが存在するか理解する。</p><h4 id="5-「やり方」を隠す" class="css-1ew8fuc efq1zb23">5 「やり方」を隠す</h4><p class="css-qpdo3c e1yjj5wz0">実装の詳細をカプセル化し，インタフェースを公開する。呼び出し元は，どうやって実現されるかを気にせず，欲しいものが得られるようにする。</p><p class="css-qpdo3c e1yjj5wz0">これよって，開発者としては，あとから実装の詳細を変更する自由が得られる。
もし，呼び出す人が実装の内部に依存したものをすでに作ってしまった場合，彼らに配慮する必要が出てくる。</p><h4 id="6-良い名前をつける" class="css-1ew8fuc efq1zb23">6 良い名前をつける</h4><p class="css-qpdo3c e1yjj5wz0"><em class="css-l2lff efespwh0">プロジェクトで最も重要なドキュメントは，ソフトウェア自身だ</em>。</p><ul class="css-rfu7dy emayir50"><li class="css-0">エンティティやふるまいには，「何をやっているのか」を示す名前をつける。</li><li class="css-0">命名には一貫性を持たせ，略語や一部のメンバーしかわからない造語は避ける。</li><li class="css-0">名前は長くても良い。ソフトウェア開発でタイピングはボトルネックにならない。</li><li class="css-0">「説明的」「能動的」「肯定的」な命名をする</li></ul><h4 id="7-コードをテスト可能に保つ" class="css-1ew8fuc efq1zb23">7 コードをテスト可能に保つ</h4><p class="css-qpdo3c e1yjj5wz0">テストコードが動くだけでなく，すぐいつでも動かせること（いろんな前提条件がないと動かないとかはダメ）。</p><h3 id="保守しやすいコードを書く7つの戦略" class="css-13h9ymw efq1zb22">保守しやすいコードを書く7つの戦略</h3><p class="css-qpdo3c e1yjj5wz0">保守しやすいコード　＝　理解しやすく扱いやすいコード</p><h4 id="コードの共同所有を取り入れる" class="css-1ew8fuc efq1zb23">コードの共同所有を取り入れる</h4><ul class="css-rfu7dy emayir50"><li class="css-0">チームメンバーの誰もがコードベースに変更を加えられるようにする。</li><li class="css-0">コーディング規約を共有し，一貫性を持たせる。属人性を排除する。</li><li class="css-0">共通のドメインモデルを使って作業し，共通の開発プラクティス，設計を表す共通の用語を使う。</li></ul><h4 id="リファクタリングを熱心に行う" class="css-1ew8fuc efq1zb23">リファクタリングを熱心に行う</h4><ul class="css-rfu7dy emayir50"><li class="css-0">リファクタリングは絶対常に行う。</li><li class="css-0">コードについて学んだことを今反映させなければ，「負債」となり，今後の時間の大多数を「新規開発」ではなく「負債の返済」にあてることになる。</li></ul><h4 id="常時ペアで行う" class="css-1ew8fuc efq1zb23">常時ペアで行う</h4><ul class="css-rfu7dy emayir50"><li class="css-0">ペアプロが，知識の伝達・維持に有効である。</li><li class="css-0">毎日でもいいからペアを変える。</li><li class="css-0">少なくとも「設計」「コーディング」「リファクタリング」「デバッグ」「テスト」の際にはペアでやるべき</li></ul><h4 id="頻繁にコードレビューする" class="css-1ew8fuc efq1zb23">頻繁にコードレビューする</h4><ul class="css-rfu7dy emayir50"><li class="css-0">ペア以外でもいいからレビューを頼む</li><li class="css-0">なぜその方法を選んだのかの意思決定の理由に着目し，設計の選択肢やトレードオフについて議論する</li></ul><h4 id="他の開発者のやり方を学ぶ" class="css-1ew8fuc efq1zb23">他の開発者のやり方を学ぶ</h4><p class="css-qpdo3c e1yjj5wz0">他人のコードを読んで，他人の書き方を学ぶ。これはスキル向上の良いプラクティスである。</p><h4 id="ソフトウェア開発を学ぶ" class="css-1ew8fuc efq1zb23">ソフトウェア開発を学ぶ</h4><ul class="css-rfu7dy emayir50"><li class="css-0">20年前はソフトウェアの本なんてほとんどなかったが，今はたくさんある。</li><li class="css-0">医師は週に8~10時間勉強している。開発者も同じだ。</li></ul><h4 id="コードを読み書きして，コーディングの練習をする" class="css-1ew8fuc efq1zb23">コードを読み書きして，コーディングの練習をする</h4><p class="css-qpdo3c e1yjj5wz0">スティーブン・キングはこう言っている</p><p class="css-qpdo3c e1yjj5wz0">「作家になりたいなら，絶対にしなければいけないことが2つある。たくさん読み，たくさん書くことだ」</p><h3 id="本章の振り返り-4" class="css-13h9ymw efq1zb22">本章の振り返り</h3><p class="css-qpdo3c e1yjj5wz0">コードを読む時間は書く時間の10倍と言われている。「CLEAN」なコードを書けば，その時間を節約できる。</p><p class="css-qpdo3c e1yjj5wz0">本章のまとめ〜CLEAN コード〜</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">凝集性</em>：似たコードを一つにすることで副作用を減らせる</li><li class="css-0"><em class="css-l2lff efespwh0">疎結合</em>：テストや影響範囲の特定が容易になる</li><li class="css-0"><em class="css-l2lff efespwh0">カプセル化</em>：実装の詳細を隠し，拡張がしやすくなる</li><li class="css-0"><em class="css-l2lff efespwh0">断定的</em>：責任を明らかにし，ソフトウェアがモジュール化される</li><li class="css-0"><em class="css-l2lff efespwh0">非冗長</em>：保守の問題を減らす。</li></ul><h2 id="10章-プラクティス6-まずテストを書く" class="css-xwt1i7 efq1zb21">10章　プラクティス6　まずテストを書く</h2><p class="css-qpdo3c e1yjj5wz0">TDD はちゃんと適用するのが難しいので，じっくり理解しよう。</p><h3 id="テストとは何か" class="css-13h9ymw efq1zb22">テストとは何か</h3><h4 id="受入テスト-＝-顧客テスト" class="css-1ew8fuc efq1zb23">受入テスト　＝　顧客テスト</h4><ul class="css-rfu7dy emayir50"><li class="css-0">ストーリーのふるまいを明確にし，開発者がプロダクトオーナー・顧客と本質的な対話をすることができるもの。</li><li class="css-0">「ほら，このテストが動いているから，ちゃんと期待するものができましたね」ってみんなで合意できるもの。</li><li class="css-0">このテストは，「どうなれば完成か」を示すと同時に，「ストーリーの作りすぎ」を防いでくれる。</li><li class="css-0">受入テストでは，<strong class="css-0">given,when,then</strong> ＝ <strong class="css-0">前提，トリガー，結果</strong> という基準で記述する。</li></ul><h4 id="ユニットテスト-＝-開発者によるテスト" class="css-1ew8fuc efq1zb23">ユニットテスト　＝　開発者によるテスト</h4><ul class="css-rfu7dy emayir50"><li class="css-0">ストーリーよりも小さいユニットをテストするもの。TDD は必ずこれを作る。</li><li class="css-0">UT は内部ドキュメントとしても機能する。テストとドキュメントが1個で済むので時間の節約にもなる。</li><li class="css-0">そして，あらかじめこれがドキュメントだとチーム内で共有されていれば「ドキュメントどこ？」ということにもならない。</li></ul><h4 id="それ以外のテスト-＝qaテスト" class="css-1ew8fuc efq1zb23">それ以外のテスト　＝QAテスト</h4><ul class="css-rfu7dy emayir50"><li class="css-0">実際の依存関係を使用してコンポーネント間の相互作用をテストする（結合テスト）。</li><li class="css-0">依存関係が多い分複雑で，動作は重いので，ユニットレベルでできることはユニットテストでするべきだ。</li><li class="css-0">で，<strong class="css-0">なんであっても依存関係は少なくした方が良い</strong>。特にソフトウェア開発プロセス。プロセスにチームを跨いだ人間の介入が必要になると，それだけ遅くなる。</li></ul><h3 id="qa（品質保証）とは" class="css-13h9ymw efq1zb22">QA（品質保証）とは</h3><p class="css-qpdo3c e1yjj5wz0">QAテストについて紹介する</p><ul class="css-rfu7dy emayir50"><li class="css-0">コンポーネントテストとは，ユニットがどのように連携するのかを調べるものだ</li><li class="css-0">機能テストとは，ユニットをまとめて e2e のふるまいを調べる</li><li class="css-0">シナリオテストは，ユーザーが実際にシステムと対話するテスト</li><li class="css-0">パフォーマンステストは，負荷とかに耐えれるか調べるテスト</li><li class="css-0">セキュリティテストは，コードの脆弱性を探す</li></ul><p class="css-qpdo3c e1yjj5wz0">プロジェクトに必要な QA テストはリスクによって異なる。なんでも全部やれば良いというものではない。</p><p class="css-qpdo3c e1yjj5wz0">それで，この QA テストもリリース直前とかではなく，自動化して普段から確認できるようにすべきだ。
でないと，リリース前になって見つかったバグを対処する時にコストがかかる（このバグなんだっけ，と思い出したり，ドキュメントやソースコードを1から読むハメになる）。</p><p class="css-qpdo3c e1yjj5wz0">マイクロソフトとかアマゾンとかは，もともと QE という専門のエンジニアを置いていたが，こうしたマニュアルテスターを「自動化を行える開発者」に置き換えていった。</p><h3 id="テスト駆動開発は，qa-の代わりではない" class="css-13h9ymw efq1zb22">テスト駆動開発は，QA の代わりではない</h3><p class="css-qpdo3c e1yjj5wz0">テストを後から書くのは，スキャンダルが発覚してから監査役を置くようなもの。あとから問題を探すのはコストがかかる。はじめから問題を解消するようにコーディングすれば，時間を節約できる。</p><p class="css-qpdo3c e1yjj5wz0">テストファーストの目的は，「ふるまいを検証する」のではなく，「ふるまいを客観的な方法で表す」こと。</p><h3 id="ユニットテスト-is-not-万能，でも書こう" class="css-13h9ymw efq1zb22">ユニットテスト is not 万能，でも書こう</h3><p class="css-qpdo3c e1yjj5wz0">ユニットテストは e2e に比べれば不十分だが，でもユニットテストはほんとに些細な小さな問題に時間を費やすのを防いでくれるから大事。</p><p class="css-qpdo3c e1yjj5wz0">システムは一般にテストがないものが多いが，もし権限があるなら，アーキテクチャを変更してでもテストしやすいコードにしよう。</p><h3 id="いいテストを書く" class="css-13h9ymw efq1zb22">いいテストを書く</h3><p class="css-qpdo3c e1yjj5wz0">「自分が実装したものと，そのフィードバック」を繰り返す最小単位が，テストファーストの真髄であるといえる。</p><p class="css-qpdo3c e1yjj5wz0">リーンやアジャイルには，<em class="css-l2lff efespwh0">「早期に顧客からフィードバックをもらうことは善である」</em>という哲学が流れている。</p><p class="css-qpdo3c e1yjj5wz0"><strong class="css-0">テストファーストは，自分一人で実践可能な「実装→フィードバック」のプラクティス</strong>なんだね。</p><p class="css-qpdo3c e1yjj5wz0">すごい人の曰く，一般にありがちな「テストアフター開発」は効率が悪いそうだ。偉い人がいうからおそらく正しい。</p><p class="css-qpdo3c e1yjj5wz0">テストファーストは，常にコードカバレッジ100％が確保できるのもいいところ。なぜなら，テストをパスするための最小のコードしか書かないから。</p><p class="css-qpdo3c e1yjj5wz0">コードもシンプルになるし，可読性もアップする。</p><h3 id="テストファーストって何のためにするの？" class="css-13h9ymw efq1zb22">テストファーストって何のためにするの？</h3><p class="css-qpdo3c e1yjj5wz0">「テストを書きやすいコードを書く習慣をつけるためにする」</p><h3 id="優れた受入テストのための7つの戦略" class="css-13h9ymw efq1zb22">優れた受入テストのための7つの戦略</h3><p class="css-qpdo3c e1yjj5wz0">受入テストは，ストーリー・タスクなどのあらゆるレベルで適用可能。これに関する7つの戦略を紹介。</p><ul class="css-rfu7dy emayir50"><li class="css-0">作っているものが何の役立つのか明確にする。</li><li class="css-0">誰が何のために何をしたいのかを知る。（c.f. 単一責任の原則）</li><li class="css-0">受入基準を自動化する。</li><li class="css-0">エッジケース，例外，代替パスを表す。予め，エッジケースを想定して作業できる。</li><li class="css-0">例示を使って詳細を具体化し，矛盾を一掃する。</li><li class="css-0">受入基準とふるまいの分離。受入基準が実装に依存するものであってはならない。🙅‍♀️ 例）実装の変更でテストが変更される</li><li class="css-0">各テストを一意にする。全てのテストは固有であり，他のテストから独立していなければならない。</li></ul><h3 id="優れたユニットテストのための7つの戦略" class="css-13h9ymw efq1zb22">優れたユニットテストのための7つの戦略</h3><ul class="css-rfu7dy emayir50"><li class="css-0">呼び出し側の視点に立つ。常に呼び出す視点からサービス設計する。入出力から考える。</li><li class="css-0">テストを使ってふるまいを表す。ユニットテストは，システムの<strong class="css-0">生きた文書</strong>になる。これが最も最新の仕様となる。</li><li class="css-0">新しい違いを生み出すテストだけを書く。念のため冗長にするとかはだめ。ユニットは一意で他から独立して重複しない方が良い。</li><li class="css-0">失敗したテストにパスするためのコードのみを書く。無駄なものを書かない。これによって，全てのコードがテストでカバーされていることを保証できる。</li><li class="css-0">テストを使って，ふるまいを作る。</li><li class="css-0">コード・テストをリファクタリングする。「実装ではなくふるまいをテストしていれば，コードをリファクタリングするときに，テストを追加，変更する必要がない」</li></ul><p class="css-qpdo3c e1yjj5wz0">このように，良いユニットテストがそろっていれば，</p><ul class="css-rfu7dy emayir50"><li class="css-0">リグレッションの確認ができる</li><li class="css-0">リファクタリングしやすい</li><li class="css-0">これが内部文書のいちばん信頼できる形式になる</li></ul><p class="css-qpdo3c e1yjj5wz0">かくして，「テストファースト」で「保守コストの低い高品質なソフトウェア」を作れるようになったのであった。</p><h3 id="本章の振り返り-5" class="css-13h9ymw efq1zb22">本章の振り返り</h3><p class="css-qpdo3c e1yjj5wz0">最初にテストを書き，次にテストに合格するのに必要なコードだけを書く。これによって，開発するソフトウェアの焦点を絞り，テスト可能になる。</p><ul class="css-rfu7dy emayir50"><li class="css-0">あまりにも多くのテストを書いたり，実装依存のテストを書いたりすると，テストファースト開発は簡単に失敗する</li><li class="css-0">テストはコードのリファクタリングをサポートする必要があり，ふるまいをあらわすのに必要なテストだけを記述する</li><li class="css-0">テストファースト開発は QA に役立つが，QA に代わるものではない</li><li class="css-0">テストファースト開発は失敗するテストを作成し，合格するのに十分なコードを書くことで機能を作る。そのあと，必要に応じてリファクタリングし，失敗する別のテストを書くことを繰り返す。</li></ul><h2 id="11章-プラクティス7-テストでふるまいを明示する" class="css-xwt1i7 efq1zb21">11章　プラクティス7　テストでふるまいを明示する</h2><h2 id="12章-プラクティス8-設計は最後に行う" class="css-xwt1i7 efq1zb21">12章　プラクティス8　設計は最後に行う</h2><ul class="css-rfu7dy emayir50"><li class="css-0">全ての設計を最後まで先延ばしにすべきとは言わない。ホワイトボードでやる，ざっくりとした議論は全然良い。</li><li class="css-0">ソフトウェアの設計活動の中には，開発サイクルの最後に実施したほうが効果的・効率的なものがある。</li><li class="css-0">詳細までは初期の段階で決めない方がよい。なぜなら，コードを書いて得られた学びをもとに，保守性の高い設計を作りこむ方がコスパが良いから。</li><li class="css-0">適用するデザインパターンやシステムの理解は，一通り作ってしまってからの方が得られやすい。</li><li class="css-0">テストを最初に書いて，最後に設計をしよう。</li></ul><h4 id="変更しやすさへの障害になるもの" class="css-1ew8fuc efq1zb23">変更しやすさへの障害になるもの</h4><p class="css-qpdo3c e1yjj5wz0">「変更しやすさ」の観点から「やらない方が良いこと」</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">カプセル化の欠如</em></li></ul><p class="css-qpdo3c e1yjj5wz0">あるコードがほかのコードを「知って」いると，直接・間接に依存性が増える。こうなると，小さな変更が無関係に思えるところに予想外の問題を引き起こす。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">継承の過度な利用</em></li></ul><p class="css-qpdo3c e1yjj5wz0">景勝は OOP において有用な機構だが，過度の利用や誤った利用は，無関係な問題を紐付けたり，深い継承ツリーを生み出して保守上の問題を起こす。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">具体的すぎる凝り固まった実装</em></li></ul><p class="css-qpdo3c e1yjj5wz0">重要部分の抽象化はした方が良い。これをしないと，冗長なコードや複雑なコードになってしまい，変更が困難なコードになる。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">インラインコード</em></li></ul><p class="css-qpdo3c e1yjj5wz0">メソッドに切り出さず，コードをインラインでコピペした方が組み込み系のプログラミングでは効率的であるとされてきた。
しかし，最近はコンパイラがメソッド呼び出しを最適化してくれるので，可読性のために，詳細すぎる処理はメソッドとして切り出した方が良い。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">依存性</em></li></ul><p class="css-qpdo3c e1yjj5wz0">一緒に扱う必要のない問題を，1箇所で行わない。1つのコードには，1つの役割を持たせる。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">作ったオブジェクトを使うか，使うオブジェクトを作るか</em></li></ul><p class="css-qpdo3c e1yjj5wz0">インスタンス化するユーザーが，オブジェクトの細かい部分まで知っている必要があると，辛い感じになる。
ユーザー側のコードが，呼び出されるコードの実装の詳細に依存してしまうので，呼び出されるコードに変更が加わると，ユーザー側のコードにも変更が必要になってしまう。</p><p class="css-qpdo3c e1yjj5wz0">ソフトウェアは，ちょっと雑なままでも <strong class="css-0">大丈夫</strong> である。なので，上記のような好ましくない慣行があっても，一応ソフトウェアは動いてしまう。
だが，PJ が大きくなると，こうした悪行から逃れる必要がある。</p><h4 id="持続可能な開発" class="css-1ew8fuc efq1zb23">持続可能な開発</h4><p class="css-qpdo3c e1yjj5wz0">変更しやすいコードを書くためのプラクティスを示す。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">死んだコードを消す</em></li></ul><p class="css-qpdo3c e1yjj5wz0">コメントアウトされて使われないコードは開発者の注意を逸らす何者でもない。何らかの理由で必要になったら，バージョン管理システムから戻せば良い。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">名前を変更する</em></li></ul><p class="css-qpdo3c e1yjj5wz0">メソッドやクラスの名前を，意図のわかるいい名前に変える。コードの変更によって，コード中のメソッドの機能もちょっとずつ変わるので，体を表す名をつけるようにする。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">判断を集約する</em></li></ul><p class="css-qpdo3c e1yjj5wz0">判断を集約し，一回だけで済むようにする（？）（よくわかってない）。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">抽象化</em></li></ul><p class="css-qpdo3c e1yjj5wz0">全ての外部依存性には，抽象を作成し利用する。モデルにエンティティは作成する。モデルはモデル化対象の特性を正しく抽象化している必要がある。</p><ul class="css-rfu7dy emayir50"><li class="css-0"><em class="css-l2lff efespwh0">クラスを整頓する</em></li></ul><p class="css-qpdo3c e1yjj5wz0">クラスが完全かどうかチェックし，正しいふるまいと正しい属性を持つようにクラスを整頓する。モデル化対象のドメインからエンティティを見逃さないようにする。</p><h4 id="コーディングとクリーニング" class="css-1ew8fuc efq1zb23">コーディングとクリーニング</h4><ul class="css-rfu7dy emayir50"><li class="css-0"><strong class="css-0">コーディング</strong>：特定のタスクの解決方法を模索する。</li><li class="css-0"><strong class="css-0">クリーニング</strong>：動くコードを，保守可能にする。</li></ul><p class="css-qpdo3c e1yjj5wz0">このように，コーディングとクリーニングでは目的が異なる。筆者的には，これらは別のタスクとして実施するのが良いぽい。</p><p class="css-qpdo3c e1yjj5wz0">技術的負債は，短期的にも長期的にも返済を続けよう。短期的には，テストファースト開発におけるリファクタリングにおいて。長期的には，チームの学びをコードに取り入れるための定期的なリファクタリング作業において。</p><h4 id="コードは書かれる回数より読まれる回数の方が多い" class="css-1ew8fuc efq1zb23">コードは書かれる回数より読まれる回数の方が多い</h4><p class="css-qpdo3c e1yjj5wz0">コードはかかれる回数より10倍読まれるらしい。なので，コードを読みやすく保っておくことには合理性がある。</p><p class="css-qpdo3c e1yjj5wz0">コードにおける命名やコメントは，「意図」がわかるようにする。コードの「やり方」ではなく，そのコードによって何を成し遂げたいのかを意識する。</p><p class="css-qpdo3c e1yjj5wz0">「やり方」はコードそれ自体が語るべきだ。もし「やり方」がわかりづらいコードなら，その説明を行うコメントをつけるのではなく，コード自体を理解しやすく変更する。</p><h4 id="意図によるプログラミング" class="css-1ew8fuc efq1zb23">意図によるプログラミング</h4><p class="css-qpdo3c e1yjj5wz0">コードにおいて，抽象度は揃えたほうがよい。抽象的なコードはそれとして1つのコードに書き，詳細の実装は他のコードに移譲する。
こうすれば頭の中で抽象レベルのスイッチングが起こらず，理解しやすくなるし，このように階層化されたコードはバグの追跡が容易になる。</p><h4 id="循環複雑度を減らす" class="css-1ew8fuc efq1zb23">循環複雑度を減らす</h4><p class="css-qpdo3c e1yjj5wz0">循環複雑度は，トーマス・マッケイブが「A Complexity Measure」で発表した概念で，コード中の実行経路の数を示す。これはテスト容易性に関する指標となる。</p><p class="css-qpdo3c e1yjj5wz0">条件分岐が1つのコードの循環複雑度は2。コードは2種類の異なる振る舞いを示しうる。</p><p class="css-qpdo3c e1yjj5wz0">循環複雑度は少ないに越したことはない。一般的に，この数はユニットテストのメソッドの数に等しいからだ。</p><p class="css-qpdo3c e1yjj5wz0">ポリモーフィズムなどのテクニックを使い，循環複雑度を減らし，コードを疎結合にしよう。</p><h4 id="生成と利用を分離する" class="css-1ew8fuc efq1zb23">生成と利用を分離する</h4><p class="css-qpdo3c e1yjj5wz0">オブジェクト指向言語では，オブジェクトを生成（インスタンス化）してから，オブジェクトを利用する。</p><p class="css-qpdo3c e1yjj5wz0">TODO: あんまり理解していない。</p><h4 id="本章の振り返り-6" class="css-1ew8fuc efq1zb23">本章の振り返り</h4><ul class="css-rfu7dy emayir50"><li class="css-0">品質は保証できない，品質は作り出す。品質を検証するのではなく，作り込むことに集中しよう。</li><li class="css-0">設計を作り込むことにリソースをさくよりも，読みやすく理解しやすいコードを作ることの方が，柔軟で変更しやすいシステムのために重要だ。</li><li class="css-0">オブジェクトの生成と利用を分離することで，テスト容易性を改善し，依存性を下げよう。</li></ul><p class="css-qpdo3c e1yjj5wz0">設計を書くなら，一度コードを作ってそこで得た学びを反映するために行うのがよい。その設計に基づいてリファクタリングし，より保守しやすいコードにすることで，
レガシーコードの「死のスパイラル」から脱出することができる。</p><h2 id="13章-プラクティス9-レガシーシステムをリファクタリングする" class="css-xwt1i7 efq1zb21">13章　プラクティス9　レガシーシステムをリファクタリングする</h2><style data-emotion-css="akmrme animation-1xhp7f5">.css-akmrme{position:absolute;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1;width:225px;height:46px;padding:7px 11px 7px 19px;color:var(--theme-ui-colors-grey,#73737D);background:#000;border-radius:5px;font-size:18px;font-weight:600;-webkit-transition:left 75ms ease-out,right 75ms ease-out,background 200ms;transition:left 75ms ease-out,right 75ms ease-out,background 200ms;-webkit-animation:animation-1xhp7f5 200ms forwards;animation:animation-1xhp7f5 200ms forwards;}.css-akmrme::after{content:'';position:absolute;left:0;right:0;margin:0 auto;bottom:-8px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #000;-webkit-transition:border-color 200ms;transition:border-color 200ms;}.css-akmrme svg path{fill:#fff;}@-webkit-keyframes animation-1xhp7f5{0%{-webkit-transform:matrix(.97,0,0,1,0,12);-ms-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12);opacity:0;}20%{-webkit-transform:matrix(.99,0,0,1,0,2);-ms-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2);opacity:.7;}40%{-webkit-transform:matrix(1,0,0,1,0,-1);-ms-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1;}70%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}100%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}}@keyframes animation-1xhp7f5{0%{-webkit-transform:matrix(.97,0,0,1,0,12);-ms-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12);opacity:0;}20%{-webkit-transform:matrix(.99,0,0,1,0,2);-ms-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2);opacity:.7;}40%{-webkit-transform:matrix(1,0,0,1,0,-1);-ms-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1;}70%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}100%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}}</style><div style="position:absolute;left:0px;top:0px;display:none;pointer-events:none" class="css-akmrme e1ocrz2j0"><style data-emotion-css="gugfy2">.css-gugfy2{margin-right:11px;}</style><span class="css-gugfy2 e1ocrz2j1">Share: </span><style data-emotion-css="pd22cz">.css-pd22cz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 11px;cursor:pointer;}</style><a class="css-pd22cz e1ocrz2j3"><style data-emotion-css="18l3o48">.css-18l3o48{width:0px;height:0px;visibility:hidden;opacity:0;}</style><div class="css-18l3o48 e1ocrz2j2">Share the selected text</div><svg width="18px" height="15px" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.0658 2.34438C14.7013 1.96349 15.1892 1.3604 15.419 0.641811C14.8244 0.994439 14.1658 1.25056 13.4648 1.3886C12.9034 0.7905 12.1036 0.416748 11.2185 0.416748C9.51888 0.416748 8.14096 1.79461 8.14096 3.49411C8.14096 3.7353 8.16822 3.97019 8.22068 4.19542C5.66301 4.06708 3.39543 2.84191 1.8776 0.980064C1.6127 1.43458 1.46094 1.96322 1.46094 2.52719C1.46094 3.59485 2.00428 4.5368 2.83003 5.08865C2.32553 5.07268 1.85104 4.93425 1.43608 4.70376C1.43586 4.71659 1.43586 4.72949 1.43586 4.74244C1.43586 6.23349 2.49666 7.47732 3.90448 7.75999C3.64622 7.83033 3.37436 7.86792 3.09366 7.86792C2.89537 7.86792 2.70257 7.84866 2.51471 7.81272C2.90629 9.03537 4.0428 9.92509 5.38945 9.94994C4.33623 10.7753 3.00928 11.2673 1.56749 11.2673C1.31911 11.2673 1.07413 11.2528 0.833374 11.2243C2.19527 12.0975 3.81291 12.6069 5.55081 12.6069C11.2113 12.6069 14.3067 7.91763 14.3067 3.85096C14.3067 3.71753 14.3037 3.5848 14.2978 3.45285C14.899 3.01896 15.4208 2.47694 15.8334 1.8598C15.2815 2.10456 14.6884 2.26998 14.0658 2.34438Z" fill="white"></path></svg></a><a class="css-pd22cz e1ocrz2j3"><div class="css-18l3o48 e1ocrz2j2">Share the selected text</div><svg width="16px" height="16px" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.59615 13.125H0.871552V4.36523H3.59615V13.125ZM2.24847 3.16406C1.81878 3.16406 1.44769 3.00781 1.13519 2.69531C0.822692 2.38281 0.666443 2.01171 0.666443 1.58203C0.666443 1.15234 0.822692 0.781248 1.13519 0.468749C1.44769 0.156249 1.81878 0 2.24847 0C2.67816 0 3.04925 0.156249 3.36175 0.468749C3.67425 0.781248 3.8305 1.15234 3.8305 1.58203C3.8305 2.01171 3.67425 2.38281 3.36175 2.69531C3.04925 3.00781 2.67816 3.16406 2.24847 3.16406ZM13.7915 13.125H11.0669V8.84765C11.0669 8.14452 11.0083 7.63671 10.8911 7.32421C10.6763 6.79687 10.2563 6.5332 9.63134 6.5332C9.00634 6.5332 8.56689 6.76757 8.31298 7.23632C8.11767 7.58788 8.02001 8.10546 8.02001 8.78905V13.125H5.32471V4.36523H7.93212V5.5664H7.96142C8.15673 5.17578 8.46923 4.85351 8.89892 4.59961C9.36767 4.28711 9.91454 4.13086 10.5395 4.13086C11.8091 4.13086 12.6977 4.53125 13.2055 5.33203C13.5962 5.97656 13.7915 6.97265 13.7915 8.3203V13.125Z" fill="white"></path></svg></a><style data-emotion-css="1lnhvdd">.css-1lnhvdd{display:inline-block;height:17px;width:1px;position:relative;margin:0 8px;background:rgba(115,115,125,0.3);}</style><div class="css-1lnhvdd e1ocrz2j5"></div><style data-emotion-css="15hjez6">.css-15hjez6{display:inline-block;padding:16px 11px;}</style><button aria-label="Copy selected text" class="css-15hjez6 e1ocrz2j4"><svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#08080B"></path></svg></button></div></div></article><style data-emotion-css="npfbur">.css-npfbur{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;display:block;}@media (max-width:66.875em){.css-npfbur{max-width:850px;}}@media (max-width:45.9375em){.css-npfbur{padding:0 2rem;max-width:527px;}}@media (max-width:33.75em){.css-npfbur{max-width:100%;}}</style><section class="css-npfbur eih7p4r2"><style data-emotion-css="1vgsxfa">.css-1vgsxfa{position:relative;opacity:0.25;margin-bottom:100px;font-weight:400;color:var(--theme-ui-colors-primary,#000);}@media (max-width:45.9375em){.css-1vgsxfa{margin-bottom:60px;}}.css-1vgsxfa::after{content:'';position:absolute;background:var(--theme-ui-colors-grey,#73737D);width:79.82456140350878%;height:1px;right:0;top:11px;}@media (max-width:45.9375em){.css-1vgsxfa::after{width:52.63157894736842%;}}@media (max-width:33.75em){.css-1vgsxfa::after{width:35.08771929824561%;}}@media (max-width:23.5em){.css-1vgsxfa::after{width:90px;}}</style><h3 class="css-1vgsxfa eih7p4r3">More articles from <!-- -->Kenya Hondoh</h3><style data-emotion-css="80jzpj">.css-80jzpj{position:relative;display:grid;grid-template-columns:1fr 457px;grid-template-rows:2;-webkit-column-gap:30px;column-gap:30px;margin:0 auto;max-width:100%;}@media (max-width:66.875em){.css-80jzpj{grid-template-columns:1fr 1fr;}}@media (max-width:45.9375em){.css-80jzpj{grid-template-columns:1fr;}}</style><div class="css-80jzpj e1h0blpq0"><style data-emotion-css="1vg4mbv">.css-1vg4mbv{position:relative;display:block;width:100%;height:100%;top:0;left:0;z-index:1;-webkit-transition:-webkit-transform 0.33s var(--ease-out-quart);-webkit-transition:transform 0.33s var(--ease-out-quart);transition:transform 0.33s var(--ease-out-quart);-webkit-tap-highlight-color:rgba(255,255,255,0);}.css-1vg4mbv:hover .e1h0blpq1{-webkit-transform:translateY(-1px);-ms-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 50px 80px -20px rgba(0,0,0,0.27),0 30px 50px -30px rgba(0,0,0,0.3);}.css-1vg4mbv:hover h2,.css-1vg4mbv:focus h2{color:var(--theme-ui-colors-accent,#6166DC);}.css-1vg4mbv[data-a11y="true"]:focus::after{content:"";position:absolute;left:-2%;top:-2%;width:104%;height:104%;border:3px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);}@media (max-width:33.75em){.css-1vg4mbv:hover .e1h0blpq1{-webkit-transform:none;-ms-transform:none;transform:none;box-shadow:initial;}.css-1vg4mbv:active{-webkit-transform:scale(0.97) translateY(3px);-ms-transform:scale(0.97) translateY(3px);transform:scale(0.97) translateY(3px);}}</style><a data-a11y="false" narrow="false" class="css-1vg4mbv e1h0blpq6" href="/blog/Speakerdeck"><style data-emotion-css="1g2qwvh">.css-1g2qwvh{position:relative;}@media (max-width:540px){.css-1g2qwvh{box-shadow:0px 20px 40px rgba(0,0,0,0.2);border-bottom-right-radius:5px;border-bottom-left-radius:5px;background:var(--theme-ui-colors-card,#fff);}}</style><div class="css-1g2qwvh e1h0blpq2"><style data-emotion-css="f56zxy">.css-f56zxy{position:relative;height:280px;box-shadow:0 30px 60px -10px rgba(0,0,0,0.3),0 18px 36px -18px rgba(0,0,0,0.33);margin-bottom:30px;-webkit-transition:-webkit-transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);-webkit-transition:transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);transition:transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);}.css-f56zxy > div{height:100%;}@media (max-width:45.9375em){.css-f56zxy{height:220px;margin-bottom:35px;}}@media (max-width:33.75em){.css-f56zxy{height:200px;margin-bottom:0;box-shadow:none;overflow:hidden;border-top-right-radius:5px;border-top-left-radius:5px;}}</style><div class="css-f56zxy e1h0blpq1"><div class="css-133qvua eria91a0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:51.07913669064748%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABZklEQVQoz6WSy0oCcRjFfYhoF3QxdVTUTd7NonqDXsMW5YUUF7Vr1wO0btuii0UjtWghbg0icsaJMUxTadTUcS6nuVgY1EL74Mf358A5fPA/Bigjy7IGhlt7j+pjjOHbrCCOmFVdkqSxUD0G1czzPBRFCxKEHiqdD0w6WiBbZnGcyyFfLoOkHvDYqEAUBTDMM2i6BLrE6FuBomiF0g9UvVik0FEO0QJ7Ax6bpyfYuiWxn79DVxyg/laH37+CkDsMf2ANofUN+JZX4QmE4faFsOQN6tsThFfRLDYXyOyNHthp1nB4cYaDy3McZa8xEEVUqzWYLU44zS5YCRdMNgcsdicWCQfmFggdoxWz8wSMJjumpmeQyVypgTKeKkWwry+QuCZYmgEvCOC4FtLpPSQSKcRiSexEdxH9IjZEeycRj6cQiWyjULjXL2z0eXA9Dv3uOxrtNlp8f/JP+atn/6qNPFLo34o9Dp/YI7wFbAz6WwAAAABJRU5ErkJggg==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/blog/static/f370e8d0f7254009b99b3a346d314ed5/ac59e/cypress.webp 163w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/7660b/cypress.webp 327w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/0acdf/cypress.webp 653w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/72b0a/cypress.webp 973w" sizes="(max-width: 653px) 100vw, 653px" /><source srcset="/blog/static/f370e8d0f7254009b99b3a346d314ed5/078a8/cypress.png 163w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/e56da/cypress.png 327w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/3ddd4/cypress.png 653w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/cff26/cypress.png 973w" sizes="(max-width: 653px) 100vw, 653px" /><img loading="lazy" sizes="(max-width: 653px) 100vw, 653px" srcset="/blog/static/f370e8d0f7254009b99b3a346d314ed5/078a8/cypress.png 163w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/e56da/cypress.png 327w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/3ddd4/cypress.png 653w,
/blog/static/f370e8d0f7254009b99b3a346d314ed5/cff26/cypress.png 973w" src="/blog/static/f370e8d0f7254009b99b3a346d314ed5/3ddd4/cypress.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><style data-emotion-css="1s3juro">.css-1s3juro{word-break:break-word;font-size:52px;line-height:2;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;font-size:22px;line-height:1.4;margin-bottom:10px;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;-webkit-transition:color 0.3s ease-in-out;transition:color 0.3s ease-in-out;text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;}@media (max-width:66.875em){.css-1s3juro{font-size:38px;line-height:1.2;}}@media (max-width:33.75em){.css-1s3juro{font-size:32px;line-height:1.3;}}@media (max-width:33.75em){.css-1s3juro{-webkit-line-clamp:3;}}@media (max-width:45.9375em){.css-1s3juro{margin-bottom:15px;}}@media (max-width:33.75em){.css-1s3juro{padding:30px 20px 0;margin-bottom:10px;-webkit-line-clamp:3;}}</style><h1 class="css-1s3juro e1h0blpq3">Speakerdeck のスライドをブログに埋め込む。</h1><style data-emotion-css="1rec7sy">.css-1rec7sy{text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;font-size:16px;margin-bottom:10px;color:var(--theme-ui-colors-grey,#73737D);display:box;max-width:515px;}@media (max-width:33.75em){.css-1rec7sy{-webkit-line-clamp:3;}}@media (max-width:66.875em){.css-1rec7sy{display:-webkit-box;}}@media (max-width:45.9375em){.css-1rec7sy{margin-bottom:15px;}}@media (max-width:33.75em){.css-1rec7sy{max-width:100%;padding:0 20px;margin-bottom:20px;-webkit-line-clamp:3;}}</style><p class="css-1rec7sy e1h0blpq4">MDX に埋め込むためのコンポーネントをつくる。</p><style data-emotion-css="118hiy6">.css-118hiy6{font-weight:600;font-size:16px;color:var(--theme-ui-colors-grey,#73737D);opacity:0.33;}@media (max-width:33.75em){.css-118hiy6{max-width:100%;padding:0 20px 30px;}}</style><div class="css-118hiy6 e1h0blpq5">June 2nd, 2020<!-- --> · <!-- -->1<!-- --> min read</div> </div></a><style data-emotion-css="5u8a0y">.css-5u8a0y{position:relative;display:block;width:100%;height:100%;top:0;left:0;z-index:1;-webkit-transition:-webkit-transform 0.33s var(--ease-out-quart);-webkit-transition:transform 0.33s var(--ease-out-quart);transition:transform 0.33s var(--ease-out-quart);-webkit-tap-highlight-color:rgba(255,255,255,0);}.css-5u8a0y:hover .e1h0blpq1{-webkit-transform:translateY(-1px);-ms-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 50px 80px -20px rgba(0,0,0,0.27),0 30px 50px -30px rgba(0,0,0,0.3);}.css-5u8a0y:hover h2,.css-5u8a0y:focus h2{color:var(--theme-ui-colors-accent,#6166DC);}.css-5u8a0y[data-a11y="true"]:focus::after{content:"";position:absolute;left:-2%;top:-2%;width:104%;height:104%;border:3px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);}@media (max-width:45.9375em){.css-5u8a0y{display:none;}}@media (max-width:33.75em){.css-5u8a0y:hover .e1h0blpq1{-webkit-transform:none;-ms-transform:none;transform:none;box-shadow:initial;}.css-5u8a0y:active{-webkit-transform:scale(0.97) translateY(3px);-ms-transform:scale(0.97) translateY(3px);transform:scale(0.97) translateY(3px);}}</style><a data-a11y="false" narrow="true" class="css-5u8a0y e1h0blpq6" href="/blog/GitHub-Actions-Cypress.io-CICD"><div class="css-1g2qwvh e1h0blpq2"><div class="css-f56zxy e1h0blpq1"><div class="css-133qvua eria91a0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:56.283566058002144%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABkklEQVQoz3VSTU/CQBTkB3vyH3gz+ivEsxy8EPFAgoGEBERSObQi8qGUAtvubgu00O64XUopVDfZ7G7f67yZN6+AsyWESM/4JqIIcFkaD+VHxwvUDrbhMTf5r/AfGJK7X7rD8uoC5EsH4wzllw5uSx3cPLTRGy5UThRlAA/oJ2Ax0GYDy3YAXUPj+hLdVhX1egO1Wk3FiW0jDMMckRQwktLirWTJREIIgiDYvxMFjDFYlqXuWxlzHCcjOQE872EMZmeqn8copenbdV14nnfCstDv92GaJjRNw2g0UlV931fBSuVZydR1A4ZhYDL5xm63S/q2V0OIrZinktfrtZIWV4rPICMlBvocDJT8xWIh9/JgH6QPmE4tDIcTEOqBuRu4Kz8vWRkiQcncxI8LvM7yYyXEnl25/IRi8R7NdhetzjvmS3rqctbtYLOCxbZ47AlU+wIzHiXMEkclxfGS42PmYGYRmJYNyldHhn+NTrzepkBzLA0IDnnZmRU59oW8nISh6iUFZVy6KXvEOTh3T4pl8w/rF5puUFvECosEAAAAAElFTkSuQmCC" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/blog/static/3a4dddd5309abddf4ee388d1d34163a6/31fce/cypress.webp 114w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/e3e25/cypress.webp 229w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/15384/cypress.webp 457w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/0258d/cypress.webp 686w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/64ea2/cypress.webp 914w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/8666c/cypress.webp 931w" sizes="(max-width: 457px) 100vw, 457px" /><source srcset="/blog/static/3a4dddd5309abddf4ee388d1d34163a6/f2e6d/cypress.png 114w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/4ddba/cypress.png 229w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/502b1/cypress.png 457w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/7ddc2/cypress.png 686w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/435bf/cypress.png 914w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/7aa00/cypress.png 931w" sizes="(max-width: 457px) 100vw, 457px" /><img loading="lazy" sizes="(max-width: 457px) 100vw, 457px" srcset="/blog/static/3a4dddd5309abddf4ee388d1d34163a6/f2e6d/cypress.png 114w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/4ddba/cypress.png 229w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/502b1/cypress.png 457w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/7ddc2/cypress.png 686w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/435bf/cypress.png 914w,
/blog/static/3a4dddd5309abddf4ee388d1d34163a6/7aa00/cypress.png 931w" src="/blog/static/3a4dddd5309abddf4ee388d1d34163a6/502b1/cypress.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><style data-emotion-css="h6bh0j">.css-h6bh0j{word-break:break-word;font-size:52px;line-height:2;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;font-size:22px;line-height:1.4;margin-bottom:45px;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;-webkit-transition:color 0.3s ease-in-out;transition:color 0.3s ease-in-out;text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;}@media (max-width:66.875em){.css-h6bh0j{font-size:38px;line-height:1.2;}}@media (max-width:33.75em){.css-h6bh0j{font-size:32px;line-height:1.3;}}@media (max-width:33.75em){.css-h6bh0j{-webkit-line-clamp:3;}}@media (max-width:45.9375em){.css-h6bh0j{margin-bottom:15px;}}@media (max-width:33.75em){.css-h6bh0j{padding:30px 20px 0;margin-bottom:10px;-webkit-line-clamp:3;}}</style><h1 class="css-h6bh0j e1h0blpq3">GitHub Actions ＋ Cypress.io でこのブログを CI/CD する</h1><style data-emotion-css="l4ss9o">.css-l4ss9o{text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;font-size:16px;margin-bottom:10px;color:var(--theme-ui-colors-grey,#73737D);display:none;max-width:515px;}@media (max-width:33.75em){.css-l4ss9o{-webkit-line-clamp:3;}}@media (max-width:66.875em){.css-l4ss9o{display:-webkit-box;}}@media (max-width:45.9375em){.css-l4ss9o{margin-bottom:15px;}}@media (max-width:33.75em){.css-l4ss9o{max-width:100%;padding:0 20px;margin-bottom:20px;-webkit-line-clamp:3;}}</style><p class="css-l4ss9o e1h0blpq4">退屈なことは GitHub Actions にやらせよう</p><div class="css-118hiy6 e1h0blpq5">May 14th, 2020<!-- --> · <!-- -->1<!-- --> min read</div> </div></a></div><style data-emotion-css="1xyudza">.css-1xyudza{margin-bottom:65px;}</style><div class="css-1xyudza eih7p4r4"></div></section><style data-emotion-css="1hk9het">.css-1hk9het{position:absolute;bottom:0;left:0;width:100%;height:590px;z-index:0;pointer-events:none;background:var(--theme-ui-colors-gradient,linear-gradient(180deg,rgba(217,219,224,0) 0%,#D9DBE0 100%));-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}</style><div class="css-1hk9het e9nvoze3"></div><style data-emotion-css="4j05o4">.css-4j05o4{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;}@media (max-width:66.875em){.css-4j05o4{max-width:850px;}}@media (max-width:45.9375em){.css-4j05o4{padding:0 2rem;max-width:527px;}}@media (max-width:33.75em){.css-4j05o4{max-width:100%;}}</style><section class="css-4j05o4 e9w9r0m0"><style data-emotion-css="1nedy0r">.css-1nedy0r{position:relative;margin:140px auto 50px;border-bottom:1px solid var(--theme-ui-colors-horizontalRule,rgba(8,8,11,0.15));}@media (max-width:45.9375em){.css-1nedy0r{margin:60px auto;}}@media (max-width:33.75em){.css-1nedy0r{display:none;}}</style><div class="css-1nedy0r e9nvoze1"></div><style data-emotion-css="1d54ci6">.css-1d54ci6{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:80px;color:var(--theme-ui-colors-grey,#73737D);}@media (max-width:45.9375em){.css-1d54ci6{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-bottom:100px;}}@media (max-width:33.75em){.css-1d54ci6{padding-bottom:50px;}}</style><div class="css-1d54ci6 e9nvoze0"><style data-emotion-css="1pt7hv6">@media (max-width:45.9375em){.css-1pt7hv6{margin-bottom:80px;}}@media (max-width:33.75em){.css-1pt7hv6{margin:120px auto 100px;}}</style><div class="css-1pt7hv6 e9nvoze2">© <!-- -->2020<!-- --> <!-- -->Kenya Hondoh</div><div><style data-emotion-css="10tgu6b">.css-10tgu6b{position:relative;margin-left:3.2rem;-webkit-text-decoration:none;text-decoration:none;max-width:16px;}.css-10tgu6b:hover svg:hover *{fill:var(--theme-ui-colors-primary,#000);}.css-10tgu6b:hover svg *{-webkit-transition:fill 0.25s var(--ease-in-out-quad);transition:fill 0.25s var(--ease-in-out-quad);}.css-10tgu6b:first-of-type{margin-left:0;}.css-10tgu6b:last-child{margin-right:0;}.css-10tgu6b[data-a11y='true']:focus::after{content:'';position:absolute;left:-50%;top:-20%;width:200%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}@media (max-width:45.9375em){.css-10tgu6b{margin:0 2.2rem;}}</style><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://twitter.com/Earllibrary" href="https://twitter.com/Earllibrary" class="css-10tgu6b e1dx16qw0"><svg width="16" height="13" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.0658 2.34438C14.7013 1.96349 15.1892 1.3604 15.419 0.641811C14.8244 0.994439 14.1658 1.25056 13.4648 1.3886C12.9034 0.7905 12.1036 0.416748 11.2185 0.416748C9.51888 0.416748 8.14096 1.79461 8.14096 3.49411C8.14096 3.7353 8.16822 3.97019 8.22068 4.19542C5.66301 4.06708 3.39543 2.84191 1.8776 0.980064C1.6127 1.43458 1.46094 1.96322 1.46094 2.52719C1.46094 3.59485 2.00428 4.5368 2.83003 5.08865C2.32553 5.07268 1.85104 4.93425 1.43608 4.70376C1.43586 4.71659 1.43586 4.72949 1.43586 4.74244C1.43586 6.23349 2.49666 7.47732 3.90448 7.75999C3.64622 7.83033 3.37436 7.86792 3.09366 7.86792C2.89537 7.86792 2.70257 7.84866 2.51471 7.81272C2.90629 9.03537 4.0428 9.92509 5.38945 9.94994C4.33623 10.7753 3.00928 11.2673 1.56749 11.2673C1.31911 11.2673 1.07413 11.2528 0.833374 11.2243C2.19527 12.0975 3.81291 12.6069 5.55081 12.6069C11.2113 12.6069 14.3067 7.91763 14.3067 3.85096C14.3067 3.71753 14.3037 3.5848 14.2978 3.45285C14.899 3.01896 15.4208 2.47694 15.8334 1.8598C15.2815 2.10456 14.6884 2.26998 14.0658 2.34438Z" fill="#73737D"></path></svg><style data-emotion-css="mglztx">.css-mglztx{width:0px;height:0px;visibility:hidden;opacity:0;overflow:hidden;display:inline-block;}</style><span class="css-mglztx e1dx16qw1">Link to $<!-- -->https://twitter.com/Earllibrary</span></a><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://github.com/kenmikanmi" href="https://github.com/kenmikanmi" class="css-10tgu6b e1dx16qw0"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 0C3.1325 0 0 3.21173 0 7.17706C0 10.3529 2.00375 13.0353 4.78625 13.9863C5.13625 14.0491 5.2675 13.8338 5.2675 13.6454C5.2675 13.4749 5.25875 12.9097 5.25875 12.3087C3.5 12.6406 3.045 11.8691 2.905 11.4653C2.82625 11.259 2.485 10.622 2.1875 10.4516C1.9425 10.317 1.5925 9.98508 2.17875 9.97611C2.73 9.96714 3.12375 10.4964 3.255 10.7118C3.885 11.7973 4.89125 11.4923 5.29375 11.3039C5.355 10.8374 5.53875 10.5234 5.74 10.3439C4.1825 10.1645 2.555 9.54549 2.555 6.80026C2.555 6.01976 2.82625 5.37382 3.2725 4.87143C3.2025 4.692 2.9575 3.95635 3.3425 2.96951C3.3425 2.96951 3.92875 2.78111 5.2675 3.70516C5.8275 3.54367 6.4225 3.46293 7.0175 3.46293C7.6125 3.46293 8.2075 3.54367 8.7675 3.70516C10.1063 2.77214 10.6925 2.96951 10.6925 2.96951C11.0775 3.95635 10.8325 4.692 10.7625 4.87143C11.2087 5.37382 11.48 6.01079 11.48 6.80026C11.48 9.55446 9.84375 10.1645 8.28625 10.3439C8.54 10.5682 8.75875 10.9988 8.75875 11.6717C8.75875 12.6316 8.75 13.4032 8.75 13.6454C8.75 13.8338 8.88125 14.0581 9.23125 13.9863C11.9963 13.0353 14 10.3439 14 7.17706C14 3.21173 10.8675 0 7 0Z" fill="#73737D"></path></svg><span class="css-mglztx e1dx16qw1">Link to $<!-- -->https://github.com/kenmikanmi</span></a><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://instagram.com/ken5526" href="https://instagram.com/ken5526" class="css-10tgu6b e1dx16qw0"><svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M-3.05176e-05 3.97163C-3.05176e-05 1.77803 1.77824 -0.000244141 3.97184 -0.000244141H9.0281C11.2217 -0.000244141 13 1.77802 13 3.97163V9.02788C13 11.2215 11.2217 12.9998 9.0281 12.9998H3.97184C1.77824 12.9998 -3.05176e-05 11.2215 -3.05176e-05 9.02789V3.97163ZM3.97184 1.281C2.48585 1.281 1.28122 2.48564 1.28122 3.97163V9.02789C1.28122 10.5139 2.48585 11.7185 3.97184 11.7185H9.0281C10.5141 11.7185 11.7187 10.5139 11.7187 9.02788V3.97163C11.7187 2.48564 10.5141 1.281 9.0281 1.281H3.97184Z" fill="#73737D"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M3.07483 6.55115C3.07483 4.64454 4.61242 3.09253 6.51702 3.09253C8.42162 3.09253 9.95921 4.64454 9.95921 6.55115C9.95921 8.45776 8.42162 10.0098 6.51702 10.0098C4.61242 10.0098 3.07483 8.45776 3.07483 6.55115ZM6.51702 4.37378C5.32709 4.37378 4.35608 5.34508 4.35608 6.55115C4.35608 7.75722 5.32709 8.72853 6.51702 8.72853C7.70695 8.72853 8.67796 7.75722 8.67796 6.55115C8.67796 5.34508 7.70695 4.37378 6.51702 4.37378Z" fill="#73737D"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.95062 3.87075C10.4035 3.87075 10.7706 3.50149 10.7706 3.04597C10.7706 2.59046 10.4035 2.22119 9.95062 2.22119C9.49776 2.22119 9.13065 2.59046 9.13065 3.04597C9.13065 3.50149 9.49776 3.87075 9.95062 3.87075Z" fill="#73737D"></path></svg><span class="css-mglztx e1dx16qw1">Link to $<!-- -->https://instagram.com/ken5526</span></a><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://www.linkedin.com/in/kenya-hondoh-2a7067123/" href="https://www.linkedin.com/in/kenya-hondoh-2a7067123/" class="css-10tgu6b e1dx16qw0"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.59615 13.125H0.871552V4.36523H3.59615V13.125ZM2.24847 3.16406C1.81878 3.16406 1.44769 3.00781 1.13519 2.69531C0.822692 2.38281 0.666443 2.01171 0.666443 1.58203C0.666443 1.15234 0.822692 0.781248 1.13519 0.468749C1.44769 0.156249 1.81878 0 2.24847 0C2.67816 0 3.04925 0.156249 3.36175 0.468749C3.67425 0.781248 3.8305 1.15234 3.8305 1.58203C3.8305 2.01171 3.67425 2.38281 3.36175 2.69531C3.04925 3.00781 2.67816 3.16406 2.24847 3.16406ZM13.7915 13.125H11.0669V8.84765C11.0669 8.14452 11.0083 7.63671 10.8911 7.32421C10.6763 6.79687 10.2563 6.5332 9.63134 6.5332C9.00634 6.5332 8.56689 6.76757 8.31298 7.23632C8.11767 7.58788 8.02001 8.10546 8.02001 8.78905V13.125H5.32471V4.36523H7.93212V5.5664H7.96142C8.15673 5.17578 8.46923 4.85351 8.89892 4.59961C9.36767 4.28711 9.91454 4.13086 10.5395 4.13086C11.8091 4.13086 12.6977 4.53125 13.2055 5.33203C13.5962 5.97656 13.7915 6.97265 13.7915 8.3203V13.125Z" fill="#73737D"></path></svg><span class="css-mglztx e1dx16qw1">Link to $<!-- -->https://www.linkedin.com/in/kenya-hondoh-2a7067123/</span></a></div></div></section></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-156100961-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/-Beyond-Legacy-Code";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8fb4eb3abb439de9c905.js"],"component---node-modules-narative-gatsby-theme-novela-src-templates-articles-template-tsx":["/component---node-modules-narative-gatsby-theme-novela-src-templates-articles-template-tsx-add5f5265934984e82a6.js"],"component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx":["/component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx-6a99196427a56700b0e7.js"],"component---node-modules-narative-gatsby-theme-novela-src-templates-author-template-tsx":["/component---node-modules-narative-gatsby-theme-novela-src-templates-author-template-tsx-27833df4391a8700dc8d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-1e5cb25b42d30c6fabb6.js"]};/*]]>*/</script><script src="/blog/component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx-6a99196427a56700b0e7.js" async=""></script><script src="/blog/commons-e5e8cad7c5387e39e401.js" async=""></script><script src="/blog/app-8fb4eb3abb439de9c905.js" async=""></script><script src="/blog/webpack-runtime-ca4bd027e6242146f66c.js" async=""></script></body></html>